(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"a",function(){return a}),r.d(t,"b",function(){return s});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return(a=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function s(e,t,r,i){var n,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(s=(a<3?n(s):a>3?n(t,r,s):n(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}},24:function(e,t,r){"use strict";r.d(t,"a",function(){return h});var i=r(1),n=r(0),a=r(4),s=r(5),o=r(26),h=function(){function e(e,t,r){void 0===t&&(t=null),void 0===r&&(r=!0),this.state="",this.metadata=null,this.reservedDataStore=null,this.doNotSerialize=!1,this._isDisposed=!1,this.animations=new Array,this._ranges={},this._isEnabled=!0,this._isParentEnabled=!0,this._isReady=!0,this._currentRenderId=-1,this._parentRenderId=-1,this._childRenderId=-1,this._worldMatrix=n.Matrix.Identity(),this._worldMatrixDeterminant=0,this._sceneRootNodesIndex=-1,this._animationPropertiesOverride=null,this._isNode=!0,this.onDisposeObservable=new s.a,this._behaviors=new Array,this.name=e,this.id=e,this._scene=t||o.a.LastCreatedScene,this.uniqueId=this._scene.getUniqueId(),this._initCache(),r&&this.addToSceneRootNodes()}return e.AddNodeConstructor=function(e,t){this._NodeConstructors[e]=t},e.Construct=function(e,t,r,i){var n=this._NodeConstructors[e];return n?n(t,r,i):null},e.prototype.isDisposed=function(){return this._isDisposed},Object.defineProperty(e.prototype,"parent",{get:function(){return this._parentNode},set:function(e){if(this._parentNode!==e){var t=this._parentNode;if(this._parentNode&&void 0!==this._parentNode._children&&null!==this._parentNode._children){var r=this._parentNode._children.indexOf(this);-1!==r&&this._parentNode._children.splice(r,1),e||this._isDisposed||this.addToSceneRootNodes()}this._parentNode=e,this._parentNode&&(void 0!==this._parentNode._children&&null!==this._parentNode._children||(this._parentNode._children=new Array),this._parentNode._children.push(this),t||this.removeFromSceneRootNodes()),this._syncParentEnabledState()}},enumerable:!0,configurable:!0}),e.prototype.addToSceneRootNodes=function(){-1===this._sceneRootNodesIndex&&(this._sceneRootNodesIndex=this._scene.rootNodes.length,this._scene.rootNodes.push(this))},e.prototype.removeFromSceneRootNodes=function(){if(-1!==this._sceneRootNodesIndex){var e=this._scene.rootNodes,t=e.length-1;e[this._sceneRootNodesIndex]=e[t],e[this._sceneRootNodesIndex]._sceneRootNodesIndex=this._sceneRootNodesIndex,this._scene.rootNodes.pop(),this._sceneRootNodesIndex=-1}},Object.defineProperty(e.prototype,"animationPropertiesOverride",{get:function(){return this._animationPropertiesOverride?this._animationPropertiesOverride:this._scene.animationPropertiesOverride},set:function(e){this._animationPropertiesOverride=e},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"Node"},Object.defineProperty(e.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},e.prototype.getEngine=function(){return this._scene.getEngine()},e.prototype.addBehavior=function(e,t){var r=this;return void 0===t&&(t=!1),-1!==this._behaviors.indexOf(e)?this:(e.init(),this._scene.isLoading&&!t?this._scene.onDataLoadedObservable.addOnce(function(){e.attach(r)}):e.attach(this),this._behaviors.push(e),this)},e.prototype.removeBehavior=function(e){var t=this._behaviors.indexOf(e);return-1===t?this:(this._behaviors[t].detach(),this._behaviors.splice(t,1),this)},Object.defineProperty(e.prototype,"behaviors",{get:function(){return this._behaviors},enumerable:!0,configurable:!0}),e.prototype.getBehaviorByName=function(e){for(var t=0,r=this._behaviors;t<r.length;t++){var i=r[t];if(i.name===e)return i}return null},e.prototype.getWorldMatrix=function(){return this._currentRenderId!==this._scene.getRenderId()&&this.computeWorldMatrix(),this._worldMatrix},e.prototype._getWorldMatrixDeterminant=function(){return this._worldMatrixDeterminant},Object.defineProperty(e.prototype,"worldMatrixFromCache",{get:function(){return this._worldMatrix},enumerable:!0,configurable:!0}),e.prototype._initCache=function(){this._cache={},this._cache.parent=void 0},e.prototype.updateCache=function(e){!e&&this.isSynchronized()||(this._cache.parent=this.parent,this._updateCache())},e.prototype._updateCache=function(e){},e.prototype._isSynchronized=function(){return!0},e.prototype._markSyncedWithParent=function(){this._parentNode&&(this._parentRenderId=this._parentNode._childRenderId)},e.prototype.isSynchronizedWithParent=function(){return!this._parentNode||this._parentRenderId===this._parentNode._childRenderId&&this._parentNode.isSynchronized()},e.prototype.isSynchronized=function(){return this._cache.parent!=this._parentNode?(this._cache.parent=this._parentNode,!1):!(this._parentNode&&!this.isSynchronizedWithParent())&&this._isSynchronized()},e.prototype.isReady=function(e){return void 0===e&&(e=!1),this._isReady},e.prototype.isEnabled=function(e){return void 0===e&&(e=!0),!1===e?this._isEnabled:!!this._isEnabled&&this._isParentEnabled},e.prototype._syncParentEnabledState=function(){this._isParentEnabled=!this._parentNode||this._parentNode.isEnabled(),this._children&&this._children.forEach(function(e){e._syncParentEnabledState()})},e.prototype.setEnabled=function(e){this._isEnabled=e,this._syncParentEnabledState()},e.prototype.isDescendantOf=function(e){return!!this.parent&&(this.parent===e||this.parent.isDescendantOf(e))},e.prototype._getDescendants=function(e,t,r){if(void 0===t&&(t=!1),this._children)for(var i=0;i<this._children.length;i++){var n=this._children[i];r&&!r(n)||e.push(n),t||n._getDescendants(e,!1,r)}},e.prototype.getDescendants=function(e,t){var r=new Array;return this._getDescendants(r,e,t),r},e.prototype.getChildMeshes=function(e,t){var r=[];return this._getDescendants(r,e,function(e){return(!t||t(e))&&void 0!==e.cullingStrategy}),r},e.prototype.getChildren=function(e,t){return void 0===t&&(t=!0),this.getDescendants(t,e)},e.prototype._setReady=function(e){e!==this._isReady&&(e?(this.onReady&&this.onReady(this),this._isReady=!0):this._isReady=!1)},e.prototype.getAnimationByName=function(e){for(var t=0;t<this.animations.length;t++){var r=this.animations[t];if(r.name===e)return r}return null},e.prototype.createAnimationRange=function(t,r,i){if(!this._ranges[t]){this._ranges[t]=e._AnimationRangeFactory(t,r,i);for(var n=0,a=this.animations.length;n<a;n++)this.animations[n]&&this.animations[n].createRange(t,r,i)}},e.prototype.deleteAnimationRange=function(e,t){void 0===t&&(t=!0);for(var r=0,i=this.animations.length;r<i;r++)this.animations[r]&&this.animations[r].deleteRange(e,t);this._ranges[e]=null},e.prototype.getAnimationRange=function(e){return this._ranges[e]},e.prototype.beginAnimation=function(e,t,r,i){var n=this.getAnimationRange(e);return n?this._scene.beginAnimation(this,n.from,n.to,t,r,i):null},e.prototype.serializeAnimationRanges=function(){var e=[];for(var t in this._ranges){var r=this._ranges[t];if(r){var i={};i.name=t,i.from=r.from,i.to=r.to,e.push(i)}}return e},e.prototype.computeWorldMatrix=function(e){return this._worldMatrix||(this._worldMatrix=n.Matrix.Identity()),this._worldMatrix},e.prototype.dispose=function(e,t){if(void 0===t&&(t=!1),this._isDisposed=!0,!e)for(var r=0,i=this.getDescendants(!0);r<i.length;r++){i[r].dispose(e,t)}this.parent?this.parent=null:this.removeFromSceneRootNodes(),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear();for(var n=0,a=this._behaviors;n<a.length;n++){a[n].detach()}this._behaviors=[]},e.ParseAnimationRanges=function(e,t,r){if(t.ranges)for(var i=0;i<t.ranges.length;i++){var n=t.ranges[i];e.createAnimationRange(n.name,n.from,n.to)}},e._AnimationRangeFactory=function(e,t,r){throw"AnimationRange needs to be imported from animation before being created."},e._NodeConstructors={},i.b([Object(a.c)()],e.prototype,"name",void 0),i.b([Object(a.c)()],e.prototype,"id",void 0),i.b([Object(a.c)()],e.prototype,"uniqueId",void 0),i.b([Object(a.c)()],e.prototype,"state",void 0),i.b([Object(a.c)()],e.prototype,"metadata",void 0),e}()},34:function(e,t,r){"use strict";r.r(t);var i=r(1),n=r(7),a=r(27),s=r(5),o=r(22),h=r(38),c=r(12),l=r(0),u=r(33),d=r(17),p=r(72),f=r(41),g=r(40),_=r(14),v=r(57),m=r(31),b=r(39),y=r(55),M=r(10),P=r(36),O=r(29),R=r(44),T=r(56),A=r(74),C=(function(){function e(){}e.NAME_EFFECTLAYER="EffectLayer",e.NAME_LAYER="Layer",e.NAME_LENSFLARESYSTEM="LensFlareSystem",e.NAME_BOUNDINGBOXRENDERER="BoundingBoxRenderer",e.NAME_PARTICLESYSTEM="ParticleSystem",e.NAME_GAMEPAD="Gamepad",e.NAME_SIMPLIFICATIONQUEUE="SimplificationQueue",e.NAME_GEOMETRYBUFFERRENDERER="GeometryBufferRenderer",e.NAME_DEPTHRENDERER="DepthRenderer",e.NAME_POSTPROCESSRENDERPIPELINEMANAGER="PostProcessRenderPipelineManager",e.NAME_SPRITE="Sprite",e.NAME_OUTLINERENDERER="Outline",e.NAME_PROCEDURALTEXTURE="ProceduralTexture",e.NAME_SHADOWGENERATOR="ShadowGenerator",e.NAME_OCTREE="Octree",e.NAME_PHYSICSENGINE="PhysicsEngine",e.NAME_AUDIO="Audio",e.STEP_ISREADYFORMESH_EFFECTLAYER=0,e.STEP_BEFOREEVALUATEACTIVEMESH_BOUNDINGBOXRENDERER=0,e.STEP_EVALUATESUBMESH_BOUNDINGBOXRENDERER=0,e.STEP_ACTIVEMESH_BOUNDINGBOXRENDERER=0,e.STEP_CAMERADRAWRENDERTARGET_EFFECTLAYER=1,e.STEP_BEFORECAMERADRAW_EFFECTLAYER=0,e.STEP_BEFORECAMERADRAW_LAYER=1,e.STEP_BEFORERENDERTARGETDRAW_LAYER=0,e.STEP_BEFORERENDERINGMESH_OUTLINE=0,e.STEP_AFTERRENDERINGMESH_OUTLINE=0,e.STEP_AFTERRENDERINGGROUPDRAW_EFFECTLAYER_DRAW=0,e.STEP_AFTERRENDERINGGROUPDRAW_BOUNDINGBOXRENDERER=1,e.STEP_BEFORECAMERAUPDATE_SIMPLIFICATIONQUEUE=0,e.STEP_BEFORECAMERAUPDATE_GAMEPAD=1,e.STEP_BEFORECLEAR_PROCEDURALTEXTURE=0,e.STEP_AFTERRENDERTARGETDRAW_LAYER=0,e.STEP_AFTERCAMERADRAW_EFFECTLAYER=0,e.STEP_AFTERCAMERADRAW_LENSFLARESYSTEM=1,e.STEP_AFTERCAMERADRAW_EFFECTLAYER_DRAW=2,e.STEP_AFTERCAMERADRAW_LAYER=3,e.STEP_AFTERRENDER_AUDIO=0,e.STEP_GATHERRENDERTARGETS_SHADOWGENERATOR=0,e.STEP_GATHERRENDERTARGETS_GEOMETRYBUFFERRENDERER=1,e.STEP_GATHERRENDERTARGETS_DEPTHRENDERER=2,e.STEP_GATHERRENDERTARGETS_POSTPROCESSRENDERPIPELINEMANAGER=3,e.STEP_GATHERACTIVECAMERARENDERTARGETS_DEPTHRENDERER=0,e.STEP_POINTERMOVE_SPRITE=0,e.STEP_POINTERDOWN_SPRITE=0,e.STEP_POINTERUP_SPRITE=0}(),function(e){function t(t){return e.apply(this,t)||this}return i.c(t,e),t.Create=function(){return Object.create(t.prototype)},t.prototype.registerStep=function(e,t,r){var i=0;for(Number.MAX_VALUE;i<this.length;i++){if(e<this[i].index)break}this.splice(i,0,{index:e,component:t,action:r.bind(t)})},t.prototype.clear=function(){this.length=0},t}(Array)),E=r(32),D=r(3),w=r(19),S=r(9),N=r(26);r.d(t,"Scene",function(){return k});var I=function(){function e(){this._singleClick=!1,this._doubleClick=!1,this._hasSwiped=!1,this._ignore=!1}return Object.defineProperty(e.prototype,"singleClick",{get:function(){return this._singleClick},set:function(e){this._singleClick=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doubleClick",{get:function(){return this._doubleClick},set:function(e){this._doubleClick=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasSwiped",{get:function(){return this._hasSwiped},set:function(e){this._hasSwiped=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignore",{get:function(){return this._ignore},set:function(e){this._ignore=e},enumerable:!0,configurable:!0}),e}(),k=function(e){function t(r,i){var a=e.call(this)||this;return a._isScene=!0,a.autoClear=!0,a.autoClearDepthAndStencil=!0,a.clearColor=new l.Color4(.2,.2,.3,1),a.ambientColor=new l.Color3(0,0,0),a._forceWireframe=!1,a._forcePointsCloud=!1,a.animationsEnabled=!0,a._animationPropertiesOverride=null,a.useConstantAnimationDeltaTime=!1,a.constantlyUpdateMeshUnderPointer=!1,a.hoverCursor="pointer",a.defaultCursor="",a.preventDefaultOnPointerDown=!0,a.preventDefaultOnPointerUp=!0,a.metadata=null,a.reservedDataStore=null,a.disableOfflineSupportExceptionRules=new Array,a.onDisposeObservable=new s.a,a._onDisposeObserver=null,a.onBeforeRenderObservable=new s.a,a._onBeforeRenderObserver=null,a.onAfterRenderObservable=new s.a,a._onAfterRenderObserver=null,a.onBeforeAnimationsObservable=new s.a,a.onAfterAnimationsObservable=new s.a,a.onBeforeDrawPhaseObservable=new s.a,a.onAfterDrawPhaseObservable=new s.a,a.onReadyObservable=new s.a,a.onBeforeCameraRenderObservable=new s.a,a._onBeforeCameraRenderObserver=null,a.onAfterCameraRenderObservable=new s.a,a._onAfterCameraRenderObserver=null,a.onBeforeActiveMeshesEvaluationObservable=new s.a,a.onAfterActiveMeshesEvaluationObservable=new s.a,a.onBeforeParticlesRenderingObservable=new s.a,a.onAfterParticlesRenderingObservable=new s.a,a.onDataLoadedObservable=new s.a,a.onNewCameraAddedObservable=new s.a,a.onCameraRemovedObservable=new s.a,a.onNewLightAddedObservable=new s.a,a.onLightRemovedObservable=new s.a,a.onNewGeometryAddedObservable=new s.a,a.onGeometryRemovedObservable=new s.a,a.onNewTransformNodeAddedObservable=new s.a,a.onTransformNodeRemovedObservable=new s.a,a.onNewMeshAddedObservable=new s.a,a.onMeshRemovedObservable=new s.a,a.onNewMaterialAddedObservable=new s.a,a.onMaterialRemovedObservable=new s.a,a.onNewTextureAddedObservable=new s.a,a.onTextureRemovedObservable=new s.a,a.onBeforeRenderTargetsRenderObservable=new s.a,a.onAfterRenderTargetsRenderObservable=new s.a,a.onBeforeStepObservable=new s.a,a.onAfterStepObservable=new s.a,a.onActiveCameraChanged=new s.a,a.onBeforeRenderingGroupObservable=new s.a,a.onAfterRenderingGroupObservable=new s.a,a.onMeshImportedObservable=new s.a,a._registeredForLateAnimationBindings=new o.b(256),a.onPrePointerObservable=new s.a,a.onPointerObservable=new s.a,a._meshPickProceed=!1,a._currentPickResult=null,a._previousPickResult=null,a._totalPointersPressed=0,a._doubleClickOccured=!1,a.cameraToUseForPointers=null,a._pointerX=0,a._pointerY=0,a._startingPointerPosition=new l.Vector2(0,0),a._previousStartingPointerPosition=new l.Vector2(0,0),a._startingPointerTime=0,a._previousStartingPointerTime=0,a._pointerCaptures={},a._timeAccumulator=0,a._currentStepId=0,a._currentInternalStep=0,a.onPreKeyboardObservable=new s.a,a.onKeyboardObservable=new s.a,a._useRightHandedSystem=!1,a._fogEnabled=!0,a._fogMode=t.FOGMODE_NONE,a.fogColor=new l.Color3(.2,.2,.3),a.fogDensity=.1,a.fogStart=0,a.fogEnd=1e3,a._shadowsEnabled=!0,a._lightsEnabled=!0,a.activeCameras=new Array,a._texturesEnabled=!0,a.particlesEnabled=!0,a.spritesEnabled=!0,a._skeletonsEnabled=!0,a.lensFlaresEnabled=!0,a.collisionsEnabled=!0,a.gravity=new l.Vector3(0,-9.807,0),a.postProcessesEnabled=!0,a.postProcesses=new Array,a.renderTargetsEnabled=!0,a.dumpNextRenderTargets=!1,a.customRenderTargets=new Array,a.importedMeshesFiles=new Array,a.probesEnabled=!0,a._meshesForIntersections=new o.b(256),a.proceduralTexturesEnabled=!0,a._totalVertices=new n.b,a._activeIndices=new n.b,a._activeParticles=new n.b,a._activeBones=new n.b,a._animationTime=0,a.animationTimeScale=1,a._renderId=0,a._frameId=0,a._executeWhenReadyTimeoutId=-1,a._intermediateRendering=!1,a._viewUpdateFlag=-1,a._projectionUpdateFlag=-1,a._alternateViewUpdateFlag=-1,a._alternateProjectionUpdateFlag=-1,a._toBeDisposed=new Array(256),a._activeRequests=new Array,a._pendingData=new Array,a._isDisposed=!1,a.dispatchAllSubMeshesOfActiveMeshes=!1,a._activeMeshes=new o.a(256),a._processedMaterials=new o.a(256),a._renderTargets=new o.b(256),a._activeParticleSystems=new o.a(256),a._activeSkeletons=new o.b(32),a._softwareSkinnedMeshes=new o.b(32),a._activeAnimatables=new Array,a._transformMatrix=l.Matrix.Zero(),a._useAlternateCameraConfiguration=!1,a._alternateRendering=!1,a._wheelEventName="",a.requireLightSorting=!1,a._components=[],a._serializableComponents=[],a._transientComponents=[],a._beforeCameraUpdateStage=C.Create(),a._beforeClearStage=C.Create(),a._gatherRenderTargetsStage=C.Create(),a._gatherActiveCameraRenderTargetsStage=C.Create(),a._isReadyForMeshStage=C.Create(),a._beforeEvaluateActiveMeshStage=C.Create(),a._evaluateSubMeshStage=C.Create(),a._activeMeshStage=C.Create(),a._cameraDrawRenderTargetStage=C.Create(),a._beforeCameraDrawStage=C.Create(),a._beforeRenderTargetDrawStage=C.Create(),a._beforeRenderingGroupDrawStage=C.Create(),a._beforeRenderingMeshStage=C.Create(),a._afterRenderingMeshStage=C.Create(),a._afterRenderingGroupDrawStage=C.Create(),a._afterCameraDrawStage=C.Create(),a._afterRenderTargetDrawStage=C.Create(),a._afterRenderStage=C.Create(),a._pointerMoveStage=C.Create(),a._pointerDownStage=C.Create(),a._pointerUpStage=C.Create(),a.geometriesByUniqueId=null,a._defaultMeshCandidates={data:[],length:0},a._defaultSubMeshCandidates={data:[],length:0},a._preventFreeActiveMeshesAndRenderingGroups=!1,a._activeMeshesFrozen=!1,a._allowPostProcessClearColor=!0,a.getDeterministicFrameTime=function(){return 1e3/60},a._tempPickingRay=E.a?E.a.Zero():null,a._blockMaterialDirtyMechanism=!1,a._engine=r||N.a.LastCreatedEngine,a._engine.scenes.push(a),a._uid=null,a._renderingManager=new A.a(a),T.a&&(a.postProcessManager=new T.a(a)),w.a.IsWindowObjectExist()&&a.attachControl(),a.workerCollisions=!1,a._createUbo(),f.a&&(a._imageProcessingConfiguration=new f.a),a.setDefaultCandidateProviders(),i&&!0===i.useGeometryUniqueIdsMap&&(a.geometriesByUniqueId={}),a.useMaterialMeshMap=i&&i.useGeometryUniqueIdsMap||!1,a.useClonedMeshhMap=i&&i.useClonedMeshhMap||!1,a._engine.onNewSceneAddedObservable.notifyObservers(a),a}return i.c(t,e),t.DefaultMaterialFactory=function(e){throw"Import StandardMaterial or Fill DefaultMaterialFactory static property on scene before relying on default material creation."},Object.defineProperty(t.prototype,"environmentTexture",{get:function(){return this._environmentTexture},set:function(e){this._environmentTexture!==e&&(this._environmentTexture=e,this.markAllMaterialsAsDirty(D.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forceWireframe",{get:function(){return this._forceWireframe},set:function(e){this._forceWireframe!==e&&(this._forceWireframe=e,this.markAllMaterialsAsDirty(D.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forcePointsCloud",{get:function(){return this._forcePointsCloud},set:function(e){this._forcePointsCloud!==e&&(this._forcePointsCloud=e,this.markAllMaterialsAsDirty(D.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationPropertiesOverride",{get:function(){return this._animationPropertiesOverride},set:function(e){this._animationPropertiesOverride=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beforeRender",{set:function(e){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),e&&(this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterRender",{set:function(e){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),e&&(this._onAfterRenderObserver=this.onAfterRenderObservable.add(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beforeCameraRender",{set:function(e){this._onBeforeCameraRenderObserver&&this.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver),this._onBeforeCameraRenderObserver=this.onBeforeCameraRenderObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterCameraRender",{set:function(e){this._onAfterCameraRenderObserver&&this.onAfterCameraRenderObservable.remove(this._onAfterCameraRenderObserver),this._onAfterCameraRenderObserver=this.onAfterCameraRenderObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unTranslatedPointer",{get:function(){return new l.Vector2(this._unTranslatedPointerX,this._unTranslatedPointerY)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useRightHandedSystem",{get:function(){return this._useRightHandedSystem},set:function(e){this._useRightHandedSystem!==e&&(this._useRightHandedSystem=e,this.markAllMaterialsAsDirty(D.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),t.prototype.setStepId=function(e){this._currentStepId=e},t.prototype.getStepId=function(){return this._currentStepId},t.prototype.getInternalStep=function(){return this._currentInternalStep},Object.defineProperty(t.prototype,"fogEnabled",{get:function(){return this._fogEnabled},set:function(e){this._fogEnabled!==e&&(this._fogEnabled=e,this.markAllMaterialsAsDirty(D.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fogMode",{get:function(){return this._fogMode},set:function(e){this._fogMode!==e&&(this._fogMode=e,this.markAllMaterialsAsDirty(D.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowsEnabled",{get:function(){return this._shadowsEnabled},set:function(e){this._shadowsEnabled!==e&&(this._shadowsEnabled=e,this.markAllMaterialsAsDirty(D.a.MATERIAL_LightDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lightsEnabled",{get:function(){return this._lightsEnabled},set:function(e){this._lightsEnabled!==e&&(this._lightsEnabled=e,this.markAllMaterialsAsDirty(D.a.MATERIAL_LightDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeCamera",{get:function(){return this._activeCamera},set:function(e){e!==this._activeCamera&&(this._activeCamera=e,this.onActiveCameraChanged.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultMaterial",{get:function(){return this._defaultMaterial||(this._defaultMaterial=t.DefaultMaterialFactory(this)),this._defaultMaterial},set:function(e){this._defaultMaterial=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texturesEnabled",{get:function(){return this._texturesEnabled},set:function(e){this._texturesEnabled!==e&&(this._texturesEnabled=e,this.markAllMaterialsAsDirty(D.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skeletonsEnabled",{get:function(){return this._skeletonsEnabled},set:function(e){this._skeletonsEnabled!==e&&(this._skeletonsEnabled=e,this.markAllMaterialsAsDirty(D.a.MATERIAL_AttributesDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_isAlternateRenderingEnabled",{get:function(){return this._alternateRendering},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frustumPlanes",{get:function(){return this._frustumPlanes},enumerable:!0,configurable:!0}),t.prototype._registerTransientComponents=function(){if(this._transientComponents.length>0){for(var e=0,t=this._transientComponents;e<t.length;e++){t[e].register()}this._transientComponents=[]}},t.prototype._addComponent=function(e){this._components.push(e),this._transientComponents.push(e);var t=e;t.addFromContainer&&this._serializableComponents.push(t)},t.prototype._getComponent=function(e){for(var t=0,r=this._components;t<r.length;t++){var i=r[t];if(i.name===e)return i}return null},t.prototype._getDefaultMeshCandidates=function(){return this._defaultMeshCandidates.data=this.meshes,this._defaultMeshCandidates.length=this.meshes.length,this._defaultMeshCandidates},t.prototype._getDefaultSubMeshCandidates=function(e){return this._defaultSubMeshCandidates.data=e.subMeshes,this._defaultSubMeshCandidates.length=e.subMeshes.length,this._defaultSubMeshCandidates},t.prototype.setDefaultCandidateProviders=function(){this.getActiveMeshCandidates=this._getDefaultMeshCandidates.bind(this),this.getActiveSubMeshCandidates=this._getDefaultSubMeshCandidates.bind(this),this.getIntersectingSubMeshCandidates=this._getDefaultSubMeshCandidates.bind(this),this.getCollidingSubMeshCandidates=this._getDefaultSubMeshCandidates.bind(this)},Object.defineProperty(t.prototype,"workerCollisions",{get:function(){return!1},set:function(e){y.a&&(this.collisionCoordinator&&this.collisionCoordinator.destroy(),this.collisionCoordinator=new y.a,this.collisionCoordinator.init(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"meshUnderPointer",{get:function(){return this._pointerOverMesh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerX",{get:function(){return this._pointerX},set:function(e){this._pointerX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerY",{get:function(){return this._pointerY},set:function(e){this._pointerY=e},enumerable:!0,configurable:!0}),t.prototype.getCachedMaterial=function(){return this._cachedMaterial},t.prototype.getCachedEffect=function(){return this._cachedEffect},t.prototype.getCachedVisibility=function(){return this._cachedVisibility},t.prototype.isCachedMaterialInvalid=function(e,t,r){return void 0===r&&(r=1),this._cachedEffect!==t||this._cachedMaterial!==e||this._cachedVisibility!==r},t.prototype.getEngine=function(){return this._engine},t.prototype.getTotalVertices=function(){return this._totalVertices.current},Object.defineProperty(t.prototype,"totalVerticesPerfCounter",{get:function(){return this._totalVertices},enumerable:!0,configurable:!0}),t.prototype.getActiveIndices=function(){return this._activeIndices.current},Object.defineProperty(t.prototype,"totalActiveIndicesPerfCounter",{get:function(){return this._activeIndices},enumerable:!0,configurable:!0}),t.prototype.getActiveParticles=function(){return this._activeParticles.current},Object.defineProperty(t.prototype,"activeParticlesPerfCounter",{get:function(){return this._activeParticles},enumerable:!0,configurable:!0}),t.prototype.getActiveBones=function(){return this._activeBones.current},Object.defineProperty(t.prototype,"activeBonesPerfCounter",{get:function(){return this._activeBones},enumerable:!0,configurable:!0}),t.prototype.getActiveMeshes=function(){return this._activeMeshes},t.prototype.getAnimationRatio=function(){return void 0!==this._animationRatio?this._animationRatio:1},t.prototype.getRenderId=function(){return this._renderId},t.prototype.getFrameId=function(){return this._frameId},t.prototype.incrementRenderId=function(){this._renderId++},t.prototype._updatePointerPosition=function(e){var t=this._engine.getRenderingCanvasClientRect();t&&(this._pointerX=e.clientX-t.left,this._pointerY=e.clientY-t.top,this._unTranslatedPointerX=this._pointerX,this._unTranslatedPointerY=this._pointerY)},t.prototype._createUbo=function(){this._sceneUbo=new g.a(this._engine,void 0,!0),this._sceneUbo.addUniform("viewProjection",16),this._sceneUbo.addUniform("view",16)},t.prototype._createAlternateUbo=function(){this._alternateSceneUbo=new g.a(this._engine,void 0,!0),this._alternateSceneUbo.addUniform("viewProjection",16),this._alternateSceneUbo.addUniform("view",16)},t.prototype._setRayOnPointerInfo=function(e){e.pickInfo&&(e.pickInfo.ray||(e.pickInfo.ray=this.createPickingRay(e.event.offsetX,e.event.offsetY,l.Matrix.Identity(),this.activeCamera)))},t.prototype.simulatePointerMove=function(e,t){var r=new PointerEvent("pointermove",t);return this._checkPrePointerObservable(e,r,M.a.POINTERMOVE)?this:this._processPointerMove(e,r)},t.prototype._processPointerMove=function(e,t){var r=this._engine.getRenderingCanvas();if(!r)return this;r.style.cursor=this.defaultCursor;var i=!!(e&&e.hit&&e.pickedMesh);i?(this.setPointerOverMesh(e.pickedMesh),this._pointerOverMesh&&this._pointerOverMesh.actionManager&&this._pointerOverMesh.actionManager.hasPointerTriggers&&(this._pointerOverMesh.actionManager.hoverCursor?r.style.cursor=this._pointerOverMesh.actionManager.hoverCursor:r.style.cursor=this.hoverCursor)):this.setPointerOverMesh(null);for(var n=0,a=this._pointerMoveStage;n<a.length;n++){e=a[n].action(this._unTranslatedPointerX,this._unTranslatedPointerY,e,i,r)}if(e){var s=t.type===this._wheelEventName?M.a.POINTERWHEEL:M.a.POINTERMOVE;if(this.onPointerMove&&this.onPointerMove(t,e,s),this.onPointerObservable.hasObservers()){var o=new M.b(s,t,e);this._setRayOnPointerInfo(o),this.onPointerObservable.notifyObservers(o,s)}}return this},t.prototype._checkPrePointerObservable=function(e,t,r){var i=new M.c(r,t,this._unTranslatedPointerX,this._unTranslatedPointerY);return e&&(i.ray=e.ray),this.onPrePointerObservable.notifyObservers(i,r),!!i.skipOnPointerObservable},t.prototype.simulatePointerDown=function(e,t){var r=new PointerEvent("pointerdown",t);return this._checkPrePointerObservable(e,r,M.a.POINTERDOWN)?this:this._processPointerDown(e,r)},t.prototype._processPointerDown=function(e,r){var i=this;if(e&&e.hit&&e.pickedMesh){this._pickedDownMesh=e.pickedMesh;var n=e.pickedMesh.actionManager;if(n){if(n.hasPickTriggers)switch(n.processTrigger(D.a.ACTION_OnPickDownTrigger,O.a.CreateNew(e.pickedMesh,r)),r.button){case 0:n.processTrigger(D.a.ACTION_OnLeftPickTrigger,O.a.CreateNew(e.pickedMesh,r));break;case 1:n.processTrigger(D.a.ACTION_OnCenterPickTrigger,O.a.CreateNew(e.pickedMesh,r));break;case 2:n.processTrigger(D.a.ACTION_OnRightPickTrigger,O.a.CreateNew(e.pickedMesh,r))}n.hasSpecificTrigger(D.a.ACTION_OnLongPressTrigger)&&window.setTimeout(function(){var e=i.pick(i._unTranslatedPointerX,i._unTranslatedPointerY,function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.actionManager&&e.actionManager.hasSpecificTrigger(D.a.ACTION_OnLongPressTrigger)&&e==i._pickedDownMesh},!1,i.cameraToUseForPointers);e&&e.hit&&e.pickedMesh&&n&&0!==i._totalPointersPressed&&Date.now()-i._startingPointerTime>t.LongPressDelay&&!i._isPointerSwiping()&&(i._startingPointerTime=0,n.processTrigger(D.a.ACTION_OnLongPressTrigger,O.a.CreateNew(e.pickedMesh,r)))},t.LongPressDelay)}}else for(var a=0,s=this._pointerDownStage;a<s.length;a++){e=s[a].action(this._unTranslatedPointerX,this._unTranslatedPointerY,e,r)}if(e){var o=M.a.POINTERDOWN;if(this.onPointerDown&&this.onPointerDown(r,e,o),this.onPointerObservable.hasObservers()){var h=new M.b(o,r,e);this._setRayOnPointerInfo(h),this.onPointerObservable.notifyObservers(h,o)}}return this},t.prototype.simulatePointerUp=function(e,t,r){var i=new PointerEvent("pointerup",t),n=new I;return r?n.doubleClick=!0:n.singleClick=!0,this._checkPrePointerObservable(e,i,M.a.POINTERUP)?this:this._processPointerUp(e,i,n)},t.prototype._processPointerUp=function(e,t,r){if(e&&e&&e.pickedMesh){if(this._pickedUpMesh=e.pickedMesh,this._pickedDownMesh===this._pickedUpMesh&&(this.onPointerPick&&this.onPointerPick(t,e),r.singleClick&&!r.ignore&&this.onPointerObservable.hasObservers())){var i=M.a.POINTERPICK,n=new M.b(i,t,e);this._setRayOnPointerInfo(n),this.onPointerObservable.notifyObservers(n,i)}e.pickedMesh.actionManager&&!r.ignore&&(e.pickedMesh.actionManager.processTrigger(D.a.ACTION_OnPickUpTrigger,O.a.CreateNew(e.pickedMesh,t)),!r.hasSwiped&&r.singleClick&&e.pickedMesh.actionManager.processTrigger(D.a.ACTION_OnPickTrigger,O.a.CreateNew(e.pickedMesh,t)),r.doubleClick&&e.pickedMesh.actionManager.hasSpecificTrigger(D.a.ACTION_OnDoublePickTrigger)&&e.pickedMesh.actionManager.processTrigger(D.a.ACTION_OnDoublePickTrigger,O.a.CreateNew(e.pickedMesh,t)))}else if(!r.ignore)for(var a=0,s=this._pointerUpStage;a<s.length;a++){e=s[a].action(this._unTranslatedPointerX,this._unTranslatedPointerY,e,t)}this._pickedDownMesh&&this._pickedDownMesh.actionManager&&this._pickedDownMesh.actionManager.hasSpecificTrigger(D.a.ACTION_OnPickOutTrigger)&&this._pickedDownMesh!==this._pickedUpMesh&&this._pickedDownMesh.actionManager.processTrigger(D.a.ACTION_OnPickOutTrigger,O.a.CreateNew(this._pickedDownMesh,t));var o=0;if(this.onPointerObservable.hasObservers()){if(!r.ignore&&!r.hasSwiped&&(r.singleClick&&this.onPointerObservable.hasSpecificMask(M.a.POINTERTAP)?o=M.a.POINTERTAP:r.doubleClick&&this.onPointerObservable.hasSpecificMask(M.a.POINTERDOUBLETAP)&&(o=M.a.POINTERDOUBLETAP),o)){n=new M.b(o,t,e);this._setRayOnPointerInfo(n),this.onPointerObservable.notifyObservers(n,o)}if(!r.ignore){o=M.a.POINTERUP;n=new M.b(o,t,e);this._setRayOnPointerInfo(n),this.onPointerObservable.notifyObservers(n,o)}}return this.onPointerUp&&!r.ignore&&this.onPointerUp(t,e,o),this},t.prototype.isPointerCaptured=function(e){return void 0===e&&(e=0),this._pointerCaptures[e]},t.prototype._isPointerSwiping=function(){return Math.abs(this._startingPointerPosition.x-this._pointerX)>t.DragMovementThreshold||Math.abs(this._startingPointerPosition.y-this._pointerY)>t.DragMovementThreshold},t.prototype.attachControl=function(e,r,i){var a=this;void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===i&&(i=!0),this._initActionManager=function(e,t){if(!a._meshPickProceed){var r=a.pick(a._unTranslatedPointerX,a._unTranslatedPointerY,a.pointerDownPredicate,!1,a.cameraToUseForPointers);a._currentPickResult=r,r&&(e=r.hit&&r.pickedMesh?r.pickedMesh.actionManager:null),a._meshPickProceed=!0}return e},this._delayedSimpleClick=function(e,r,i){(Date.now()-a._previousStartingPointerTime>t.DoubleClickDelay&&!a._doubleClickOccured||e!==a._previousButtonPressed)&&(a._doubleClickOccured=!1,r.singleClick=!0,r.ignore=!1,i(r,a._currentPickResult))},this._initClickEvent=function(e,r,i,n){var s=new I;a._currentPickResult=null;var o=null,h=e.hasSpecificMask(M.a.POINTERPICK)||r.hasSpecificMask(M.a.POINTERPICK)||e.hasSpecificMask(M.a.POINTERTAP)||r.hasSpecificMask(M.a.POINTERTAP)||e.hasSpecificMask(M.a.POINTERDOUBLETAP)||r.hasSpecificMask(M.a.POINTERDOUBLETAP);!h&&R.a&&(o=a._initActionManager(o,s))&&(h=o.hasPickTriggers);var c=!1;if(h){var l=i.button;if(s.hasSwiped=a._isPointerSwiping(),!s.hasSwiped){var u=!t.ExclusiveDoubleClickMode;u||(u=!e.hasSpecificMask(M.a.POINTERDOUBLETAP)&&!r.hasSpecificMask(M.a.POINTERDOUBLETAP))&&!R.a.HasSpecificTrigger(D.a.ACTION_OnDoublePickTrigger)&&(o=a._initActionManager(o,s))&&(u=!o.hasSpecificTrigger(D.a.ACTION_OnDoublePickTrigger)),u?(Date.now()-a._previousStartingPointerTime>t.DoubleClickDelay||l!==a._previousButtonPressed)&&(s.singleClick=!0,n(s,a._currentPickResult),c=!0):(a._previousDelayedSimpleClickTimeout=a._delayedSimpleClickTimeout,a._delayedSimpleClickTimeout=window.setTimeout(a._delayedSimpleClick.bind(a,l,s,n),t.DoubleClickDelay));var d=e.hasSpecificMask(M.a.POINTERDOUBLETAP)||r.hasSpecificMask(M.a.POINTERDOUBLETAP);!d&&R.a.HasSpecificTrigger(D.a.ACTION_OnDoublePickTrigger)&&(o=a._initActionManager(o,s))&&(d=o.hasSpecificTrigger(D.a.ACTION_OnDoublePickTrigger)),d&&(l===a._previousButtonPressed&&Date.now()-a._previousStartingPointerTime<t.DoubleClickDelay&&!a._doubleClickOccured?(s.hasSwiped||a._isPointerSwiping()?(a._doubleClickOccured=!1,a._previousStartingPointerTime=a._startingPointerTime,a._previousStartingPointerPosition.x=a._startingPointerPosition.x,a._previousStartingPointerPosition.y=a._startingPointerPosition.y,a._previousButtonPressed=l,t.ExclusiveDoubleClickMode?(a._previousDelayedSimpleClickTimeout&&clearTimeout(a._previousDelayedSimpleClickTimeout),a._previousDelayedSimpleClickTimeout=a._delayedSimpleClickTimeout,n(s,a._previousPickResult)):n(s,a._currentPickResult)):(a._previousStartingPointerTime=0,a._doubleClickOccured=!0,s.doubleClick=!0,s.ignore=!1,t.ExclusiveDoubleClickMode&&a._previousDelayedSimpleClickTimeout&&clearTimeout(a._previousDelayedSimpleClickTimeout),a._previousDelayedSimpleClickTimeout=a._delayedSimpleClickTimeout,n(s,a._currentPickResult)),c=!0):(a._doubleClickOccured=!1,a._previousStartingPointerTime=a._startingPointerTime,a._previousStartingPointerPosition.x=a._startingPointerPosition.x,a._previousStartingPointerPosition.y=a._startingPointerPosition.y,a._previousButtonPressed=l))}}c||n(s,a._currentPickResult)},this._onPointerMove=function(e){if(a._updatePointerPosition(e),!a._checkPrePointerObservable(null,e,e.type===a._wheelEventName?M.a.POINTERWHEEL:M.a.POINTERMOVE)&&(a.cameraToUseForPointers||a.activeCamera)){a.pointerMovePredicate||(a.pointerMovePredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()&&(e.enablePointerMoveEvents||a.constantlyUpdateMeshUnderPointer||null!==e.actionManager&&void 0!==e.actionManager)});var t=a.pick(a._unTranslatedPointerX,a._unTranslatedPointerY,a.pointerMovePredicate,!1,a.cameraToUseForPointers);a._processPointerMove(t,e)}},this._onPointerDown=function(e){if(a._totalPointersPressed++,a._pickedDownMesh=null,a._meshPickProceed=!1,a._updatePointerPosition(e),a.preventDefaultOnPointerDown&&h&&(e.preventDefault(),h.focus()),a._startingPointerPosition.x=a._pointerX,a._startingPointerPosition.y=a._pointerY,a._startingPointerTime=Date.now(),!a._checkPrePointerObservable(null,e,M.a.POINTERDOWN)&&(a.cameraToUseForPointers||a.activeCamera)){a._pointerCaptures[e.pointerId]=!0,a.pointerDownPredicate||(a.pointerDownPredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()}),a._pickedDownMesh=null;var t=a.pick(a._unTranslatedPointerX,a._unTranslatedPointerY,a.pointerDownPredicate,!1,a.cameraToUseForPointers);a._processPointerDown(t,e)}},this._onPointerUp=function(e){0!==a._totalPointersPressed&&(a._totalPointersPressed--,a._pickedUpMesh=null,a._meshPickProceed=!1,a._updatePointerPosition(e),a.preventDefaultOnPointerUp&&h&&(e.preventDefault(),h.focus()),a._initClickEvent(a.onPrePointerObservable,a.onPointerObservable,e,function(t,r){if(a._pointerCaptures[e.pointerId]=!1,a.onPrePointerObservable.hasObservers()&&!t.ignore){if(!t.hasSwiped){if(t.singleClick&&a.onPrePointerObservable.hasSpecificMask(M.a.POINTERTAP)&&a._checkPrePointerObservable(null,e,M.a.POINTERTAP))return;if(t.doubleClick&&a.onPrePointerObservable.hasSpecificMask(M.a.POINTERDOUBLETAP)&&a._checkPrePointerObservable(null,e,M.a.POINTERDOUBLETAP))return}if(a._checkPrePointerObservable(null,e,M.a.POINTERUP))return}(a.cameraToUseForPointers||a.activeCamera)&&(a.pointerUpPredicate||(a.pointerUpPredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()}),!a._meshPickProceed&&(R.a&&R.a.HasTriggers||a.onPointerObservable.hasObservers())&&a._initActionManager(null,t),r||(r=a._currentPickResult),a._processPointerUp(r,e,t),a._previousPickResult=a._currentPickResult)}))},this._onKeyDown=function(e){var t=P.a.KEYDOWN;if(a.onPreKeyboardObservable.hasObservers()){var r=new P.c(t,e);if(a.onPreKeyboardObservable.notifyObservers(r,t),r.skipOnPointerObservable)return}if(a.onKeyboardObservable.hasObservers()){r=new P.b(t,e);a.onKeyboardObservable.notifyObservers(r,t)}a.actionManager&&a.actionManager.processTrigger(D.a.ACTION_OnKeyDownTrigger,O.a.CreateNewFromScene(a,e))},this._onKeyUp=function(e){var t=P.a.KEYUP;if(a.onPreKeyboardObservable.hasObservers()){var r=new P.c(t,e);if(a.onPreKeyboardObservable.notifyObservers(r,t),r.skipOnPointerObservable)return}if(a.onKeyboardObservable.hasObservers()){r=new P.b(t,e);a.onKeyboardObservable.notifyObservers(r,t)}a.actionManager&&a.actionManager.processTrigger(D.a.ACTION_OnKeyUpTrigger,O.a.CreateNewFromScene(a,e))};var s=this.getEngine();this._onCanvasFocusObserver=s.onCanvasFocusObservable.add(function(){h&&(h.addEventListener("keydown",a._onKeyDown,!1),h.addEventListener("keyup",a._onKeyUp,!1))}),this._onCanvasBlurObserver=s.onCanvasBlurObservable.add(function(){h&&(h.removeEventListener("keydown",a._onKeyDown),h.removeEventListener("keyup",a._onKeyUp))});var o=n.c.GetPointerPrefix(),h=this._engine.getRenderingCanvas();h&&(i&&(h.addEventListener(o+"move",this._onPointerMove,!1),this._wheelEventName="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",h.addEventListener(this._wheelEventName,this._onPointerMove,!1)),r&&h.addEventListener(o+"down",this._onPointerDown,!1),e&&window.addEventListener(o+"up",this._onPointerUp,!1),h.tabIndex=1)},t.prototype.detachControl=function(){var e=this.getEngine(),t=n.c.GetPointerPrefix(),r=e.getRenderingCanvas();r&&(r.removeEventListener(t+"move",this._onPointerMove),r.removeEventListener(t+"down",this._onPointerDown),window.removeEventListener(t+"up",this._onPointerUp),this._onCanvasBlurObserver&&e.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onCanvasFocusObserver&&e.onCanvasFocusObservable.remove(this._onCanvasFocusObserver),r.removeEventListener(this._wheelEventName,this._onPointerMove),r.removeEventListener("keydown",this._onKeyDown),r.removeEventListener("keyup",this._onKeyUp),this.onKeyboardObservable.clear(),this.onPreKeyboardObservable.clear(),this.onPointerObservable.clear(),this.onPrePointerObservable.clear())},t.prototype.isReady=function(){if(this._isDisposed)return!1;var e,t=this.getEngine();if(!t.areAllEffectsReady())return!1;if(this._pendingData.length>0)return!1;for(e=0;e<this.meshes.length;e++){var r=this.meshes[e];if(r.isEnabled()&&(r.subMeshes&&0!==r.subMeshes.length)){if(!r.isReady(!0))return!1;for(var i="InstancedMesh"===r.getClassName()||"InstancedLinesMesh"===r.getClassName()||t.getCaps().instancedArrays&&r.instances.length>0,n=0,a=this._isReadyForMeshStage;n<a.length;n++){if(!a[n].action(r,i))return!1}}}for(e=0;e<this.geometries.length;e++){if(this.geometries[e].delayLoadState===D.a.DELAYLOADSTATE_LOADING)return!1}if(this.activeCameras&&this.activeCameras.length>0)for(var s=0,o=this.activeCameras;s<o.length;s++){if(!o[s].isReady(!0))return!1}else if(this.activeCamera&&!this.activeCamera.isReady(!0))return!1;for(var h=0,c=this.particleSystems;h<c.length;h++){if(!c[h].isReady())return!1}return!0},t.prototype.resetCachedMaterial=function(){this._cachedMaterial=null,this._cachedEffect=null,this._cachedVisibility=null},t.prototype.registerBeforeRender=function(e){this.onBeforeRenderObservable.add(e)},t.prototype.unregisterBeforeRender=function(e){this.onBeforeRenderObservable.removeCallback(e)},t.prototype.registerAfterRender=function(e){this.onAfterRenderObservable.add(e)},t.prototype.unregisterAfterRender=function(e){this.onAfterRenderObservable.removeCallback(e)},t.prototype._executeOnceBeforeRender=function(e){var t=this,r=function(){e(),setTimeout(function(){t.unregisterBeforeRender(r)})};this.registerBeforeRender(r)},t.prototype.executeOnceBeforeRender=function(e,t){var r=this;void 0!==t?setTimeout(function(){r._executeOnceBeforeRender(e)},t):this._executeOnceBeforeRender(e)},t.prototype._addPendingData=function(e){this._pendingData.push(e)},t.prototype._removePendingData=function(e){var t=this.isLoading,r=this._pendingData.indexOf(e);-1!==r&&this._pendingData.splice(r,1),t&&!this.isLoading&&this.onDataLoadedObservable.notifyObservers(this)},t.prototype.getWaitingItemsCount=function(){return this._pendingData.length},Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._pendingData.length>0},enumerable:!0,configurable:!0}),t.prototype.executeWhenReady=function(e){var t=this;this.onReadyObservable.add(e),-1===this._executeWhenReadyTimeoutId&&(this._executeWhenReadyTimeoutId=setTimeout(function(){t._checkIsReady()},150))},t.prototype.whenReadyAsync=function(){var e=this;return new Promise(function(t){e.executeWhenReady(function(){t()})})},t.prototype._checkIsReady=function(){var e=this;if(this._registerTransientComponents(),this.isReady())return this.onReadyObservable.notifyObservers(this),this.onReadyObservable.clear(),void(this._executeWhenReadyTimeoutId=-1);this._executeWhenReadyTimeoutId=setTimeout(function(){e._checkIsReady()},150)},t.prototype.beginWeightedAnimation=function(e,t,r,i,n,a,s,o,h,c){void 0===i&&(i=1),void 0===a&&(a=1);var l=this.beginAnimation(e,t,r,n,a,s,o,!1,h,c);return l.weight=i,l},t.prototype.beginAnimation=function(e,t,r,i,n,a,s,o,h,c){void 0===n&&(n=1),void 0===o&&(o=!0),t>r&&n>0&&(n*=-1),o&&this.stopAnimation(e,void 0,h),s||(s=new v.a(this,e,t,r,i,n,a,void 0,c));var l=!h||h(e);if(e.animations&&l&&s.appendAnimations(e,e.animations),e.getAnimatables)for(var u=e.getAnimatables(),d=0;d<u.length;d++)this.beginAnimation(u[d],t,r,i,n,a,s,o,h,c);return s.reset(),s},t.prototype.beginHierarchyAnimation=function(e,t,r,i,n,a,s,o,h,c,l){void 0===a&&(a=1),void 0===h&&(h=!0);var u=e.getDescendants(t),d=[];d.push(this.beginAnimation(e,r,i,n,a,s,o,h,c));for(var p=0,f=u;p<f.length;p++){var g=f[p];d.push(this.beginAnimation(g,r,i,n,a,s,o,h,c))}return d},t.prototype.beginDirectAnimation=function(e,t,r,i,n,a,s,o){return void 0===a&&(a=1),new v.a(this,e,r,i,n,a,s,t,o)},t.prototype.beginDirectHierarchyAnimation=function(e,t,r,i,n,a,s,o,h){var c=e.getDescendants(t),l=[];l.push(this.beginDirectAnimation(e,r,i,n,a,s,o,h));for(var u=0,d=c;u<d.length;u++){var p=d[u];l.push(this.beginDirectAnimation(p,r,i,n,a,s,o,h))}return l},t.prototype.getAnimatableByTarget=function(e){for(var t=0;t<this._activeAnimatables.length;t++)if(this._activeAnimatables[t].target===e)return this._activeAnimatables[t];return null},t.prototype.getAllAnimatablesByTarget=function(e){for(var t=[],r=0;r<this._activeAnimatables.length;r++)this._activeAnimatables[r].target===e&&t.push(this._activeAnimatables[r]);return t},Object.defineProperty(t.prototype,"animatables",{get:function(){return this._activeAnimatables},enumerable:!0,configurable:!0}),t.prototype.stopAnimation=function(e,t,r){for(var i=0,n=this.getAllAnimatablesByTarget(e);i<n.length;i++){n[i].stop(t,r)}},t.prototype.stopAllAnimations=function(){if(this._activeAnimatables){for(var e=0;e<this._activeAnimatables.length;e++)this._activeAnimatables[e].stop();this._activeAnimatables=[]}for(var t=0,r=this.animationGroups;t<r.length;t++){r[t].stop()}},t.prototype.resetLastAnimationTimeFrame=function(){this._animationTimeLast=a.a.Now},t.prototype._animate=function(){if(this.animationsEnabled&&0!==this._activeAnimatables.length){var e=a.a.Now;if(!this._animationTimeLast){if(this._pendingData.length>0)return;this._animationTimeLast=e}var t=this.useConstantAnimationDeltaTime?16:(e-this._animationTimeLast)*this.animationTimeScale;this._animationTime+=t,this._animationTimeLast=e;for(var r=0;r<this._activeAnimatables.length;r++)this._activeAnimatables[r]._animate(this._animationTime);this._processLateAnimationBindings()}},t.prototype._registerTargetForLateAnimationBinding=function(e,t){var r=e.target;this._registeredForLateAnimationBindings.pushNoDuplicate(r),r._lateAnimationHolders||(r._lateAnimationHolders={}),r._lateAnimationHolders[e.targetPath]||(r._lateAnimationHolders[e.targetPath]={totalWeight:0,animations:[],originalValue:t}),r._lateAnimationHolders[e.targetPath].animations.push(e),r._lateAnimationHolders[e.targetPath].totalWeight+=e.weight},t.prototype._processLateAnimationBindingsForMatrices=function(e){var t=1,r=l.Tmp.Vector3[0],i=l.Tmp.Vector3[1],n=l.Tmp.Quaternion[0],a=0,s=e.animations[0],o=e.originalValue,h=1;if(e.totalWeight<1)o.decompose(i,n,r),h=1-e.totalWeight;else if(a=1,t=e.totalWeight,s.currentValue.decompose(i,n,r),1==(h=s.weight/t))return s.currentValue;i.scaleInPlace(h),r.scaleInPlace(h),n.scaleInPlace(h);for(var c=a;c<e.animations.length;c++){var u=e.animations[c],d=(h=u.weight/t,l.Tmp.Vector3[2]),p=l.Tmp.Vector3[3],f=l.Tmp.Quaternion[1];u.currentValue.decompose(p,f,d),p.scaleAndAddToRef(h,i),f.scaleAndAddToRef(h,n),d.scaleAndAddToRef(h,r)}return l.Matrix.ComposeToRef(i,n,r,s._workValue),s._workValue},t.prototype._processLateAnimationBindingsForQuaternions=function(e,t){var r=e.animations[0],i=e.originalValue;if(1===e.animations.length)return l.Quaternion.SlerpToRef(i,r.currentValue,Math.min(1,e.totalWeight),t),t;var n,a,s=1;if(e.totalWeight<1){var o=1-e.totalWeight;a=[],(n=[]).push(i),a.push(o)}else{if(2===e.animations.length)return l.Quaternion.SlerpToRef(e.animations[0].currentValue,e.animations[1].currentValue,e.animations[1].weight/e.totalWeight,t),t;n=[],a=[],s=e.totalWeight}for(var h=0;h<e.animations.length;h++){var c=e.animations[h];n.push(c.currentValue),a.push(c.weight/s)}for(var u=0,d=null,p=0;p<n.length;)d?(u+=a[p],l.Quaternion.SlerpToRef(d,n[p],a[p]/u,d),p++):(l.Quaternion.SlerpToRef(n[p],n[p+1],a[p+1]/(a[p]+a[p+1]),t),d=t,u=a[p]+a[p+1],p+=2);return d},t.prototype._processLateAnimationBindings=function(){if(this._registeredForLateAnimationBindings.length){for(var e=0;e<this._registeredForLateAnimationBindings.length;e++){var t=this._registeredForLateAnimationBindings.data[e];for(var r in t._lateAnimationHolders){var i=t._lateAnimationHolders[r],n=i.animations[0],a=i.originalValue,s=_.a.AllowMatrixDecomposeForInterpolation&&a.m,o=t[r];if(s)o=this._processLateAnimationBindingsForMatrices(i);else if(void 0!==a.w)o=this._processLateAnimationBindingsForQuaternions(i,o||l.Quaternion.Identity());else{var h=0,c=1;if(i.totalWeight<1)o=a.scale?a.scale(1-i.totalWeight):a*(1-i.totalWeight);else{c=i.totalWeight;var u=n.weight/c;o=1!==u?n.currentValue.scale?n.currentValue.scale(u):n.currentValue*u:n.currentValue,h=1}for(var d=h;d<i.animations.length;d++){var p=i.animations[d],f=p.weight/c;p.currentValue.scaleAndAddToRef?p.currentValue.scaleAndAddToRef(f,o):o+=p.currentValue*f}}t[r]=o}t._lateAnimationHolders={}}this._registeredForLateAnimationBindings.reset()}},t.prototype._switchToAlternateCameraConfiguration=function(e){this._useAlternateCameraConfiguration=e},t.prototype.getViewMatrix=function(){return this._useAlternateCameraConfiguration?this._alternateViewMatrix:this._viewMatrix},t.prototype.getProjectionMatrix=function(){return this._useAlternateCameraConfiguration?this._alternateProjectionMatrix:this._projectionMatrix},t.prototype.getTransformMatrix=function(){return this._useAlternateCameraConfiguration?this._alternateTransformMatrix:this._transformMatrix},t.prototype.setTransformMatrix=function(e,t){if(this._viewUpdateFlag!==e.updateFlag||this._projectionUpdateFlag!==t.updateFlag){if(this._viewUpdateFlag=e.updateFlag,this._projectionUpdateFlag=t.updateFlag,this._viewMatrix=e,this._projectionMatrix=t,this._viewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix),this._frustumPlanes?l.Frustum.GetPlanesToRef(this._transformMatrix,this._frustumPlanes):this._frustumPlanes=l.Frustum.GetPlanes(this._transformMatrix),this.activeCamera&&this.activeCamera._alternateCamera){var r=this.activeCamera._alternateCamera;r.getViewMatrix().multiplyToRef(r.getProjectionMatrix(),l.Tmp.Matrix[0]),l.Frustum.GetRightPlaneToRef(l.Tmp.Matrix[0],this._frustumPlanes[3])}this._sceneUbo.useUbo&&(this._sceneUbo.updateMatrix("viewProjection",this._transformMatrix),this._sceneUbo.updateMatrix("view",this._viewMatrix),this._sceneUbo.update())}},t.prototype._setAlternateTransformMatrix=function(e,t){this._alternateViewUpdateFlag===e.updateFlag&&this._alternateProjectionUpdateFlag===t.updateFlag||(this._alternateViewUpdateFlag=e.updateFlag,this._alternateProjectionUpdateFlag=t.updateFlag,this._alternateViewMatrix=e,this._alternateProjectionMatrix=t,this._alternateTransformMatrix||(this._alternateTransformMatrix=l.Matrix.Zero()),this._alternateViewMatrix.multiplyToRef(this._alternateProjectionMatrix,this._alternateTransformMatrix),this._alternateSceneUbo||this._createAlternateUbo(),this._alternateSceneUbo.useUbo&&(this._alternateSceneUbo.updateMatrix("viewProjection",this._alternateTransformMatrix),this._alternateSceneUbo.updateMatrix("view",this._alternateViewMatrix),this._alternateSceneUbo.update()))},t.prototype.getSceneUniformBuffer=function(){return this._useAlternateCameraConfiguration?this._alternateSceneUbo:this._sceneUbo},t.prototype.getUniqueId=function(){var e=t._uniqueIdCounter;return t._uniqueIdCounter++,e},t.prototype.addMesh=function(e,t){var r=this;void 0===t&&(t=!1),this.meshes.push(e),this.collisionCoordinator&&this.collisionCoordinator.onMeshAdded(e),e._resyncLightSources(),this.onNewMeshAddedObservable.notifyObservers(e),t&&e.getChildMeshes().forEach(function(e){r.addMesh(e)})},t.prototype.removeMesh=function(e,t){var r=this;void 0===t&&(t=!1);var i=this.meshes.indexOf(e);return-1!==i&&(this.meshes[i]=this.meshes[this.meshes.length-1],this.meshes.pop()),this.onMeshRemovedObservable.notifyObservers(e),t&&e.getChildMeshes().forEach(function(e){r.removeMesh(e)}),i},t.prototype.addTransformNode=function(e){e._indexInSceneTransformNodesArray=this.transformNodes.length,this.transformNodes.push(e),this.onNewTransformNodeAddedObservable.notifyObservers(e)},t.prototype.removeTransformNode=function(e){var t=e._indexInSceneTransformNodesArray;if(-1!==t){if(t!==this.transformNodes.length-1){var r=this.transformNodes[this.transformNodes.length-1];this.transformNodes[t]=r,r._indexInSceneTransformNodesArray=t}e._indexInSceneTransformNodesArray=-1,this.transformNodes.pop()}return this.onTransformNodeRemovedObservable.notifyObservers(e),t},t.prototype.removeSkeleton=function(e){var t=this.skeletons.indexOf(e);return-1!==t&&this.skeletons.splice(t,1),t},t.prototype.removeMorphTargetManager=function(e){var t=this.morphTargetManagers.indexOf(e);return-1!==t&&this.morphTargetManagers.splice(t,1),t},t.prototype.removeLight=function(e){var t=this.lights.indexOf(e);if(-1!==t){for(var r=0,i=this.meshes;r<i.length;r++){i[r]._removeLightSource(e)}this.lights.splice(t,1),this.sortLightsByPriority()}return this.onLightRemovedObservable.notifyObservers(e),t},t.prototype.removeCamera=function(e){var t=this.cameras.indexOf(e);-1!==t&&this.cameras.splice(t,1);var r=this.activeCameras.indexOf(e);return-1!==r&&this.activeCameras.splice(r,1),this.activeCamera===e&&(this.cameras.length>0?this.activeCamera=this.cameras[0]:this.activeCamera=null),this.onCameraRemovedObservable.notifyObservers(e),t},t.prototype.removeParticleSystem=function(e){var t=this.particleSystems.indexOf(e);return-1!==t&&this.particleSystems.splice(t,1),t},t.prototype.removeAnimation=function(e){var t=this.animations.indexOf(e);return-1!==t&&this.animations.splice(t,1),t},t.prototype.removeAnimationGroup=function(e){var t=this.animationGroups.indexOf(e);return-1!==t&&this.animationGroups.splice(t,1),t},t.prototype.removeMultiMaterial=function(e){var t=this.multiMaterials.indexOf(e);return-1!==t&&this.multiMaterials.splice(t,1),t},t.prototype.removeMaterial=function(e){var t=e._indexInSceneMaterialArray;if(-1!==t&&t<this.materials.length){if(t!==this.materials.length-1){var r=this.materials[this.materials.length-1];this.materials[t]=r,r._indexInSceneMaterialArray=t}e._indexInSceneMaterialArray=-1,this.materials.pop()}return this.onMaterialRemovedObservable.notifyObservers(e),t},t.prototype.removeActionManager=function(e){var t=this.actionManagers.indexOf(e);return-1!==t&&this.actionManagers.splice(t,1),t},t.prototype.removeTexture=function(e){var t=this.textures.indexOf(e);return-1!==t&&this.textures.splice(t,1),this.onTextureRemovedObservable.notifyObservers(e),t},t.prototype.addLight=function(e){this.lights.push(e),this.sortLightsByPriority();for(var t=0,r=this.meshes;t<r.length;t++){var i=r[t];-1===i._lightSources.indexOf(e)&&(i._lightSources.push(e),i._resyncLightSources())}this.onNewLightAddedObservable.notifyObservers(e)},t.prototype.sortLightsByPriority=function(){this.requireLightSorting&&this.lights.sort(m.a.CompareLightsPriority)},t.prototype.addCamera=function(e){this.cameras.push(e),this.onNewCameraAddedObservable.notifyObservers(e)},t.prototype.addSkeleton=function(e){this.skeletons.push(e)},t.prototype.addParticleSystem=function(e){this.particleSystems.push(e)},t.prototype.addAnimation=function(e){this.animations.push(e)},t.prototype.addAnimationGroup=function(e){this.animationGroups.push(e)},t.prototype.addMultiMaterial=function(e){this.multiMaterials.push(e)},t.prototype.addMaterial=function(e){e._indexInSceneMaterialArray=this.materials.length,this.materials.push(e),this.onNewMaterialAddedObservable.notifyObservers(e)},t.prototype.addMorphTargetManager=function(e){this.morphTargetManagers.push(e)},t.prototype.addGeometry=function(e){this.geometriesByUniqueId&&(this.geometriesByUniqueId[e.uniqueId]=this.geometries.length),this.geometries.push(e)},t.prototype.addActionManager=function(e){this.actionManagers.push(e)},t.prototype.addTexture=function(e){this.textures.push(e),this.onNewTextureAddedObservable.notifyObservers(e)},t.prototype.switchActiveCamera=function(e,t){void 0===t&&(t=!0);var r=this._engine.getRenderingCanvas();r&&(this.activeCamera&&this.activeCamera.detachControl(r),this.activeCamera=e,t&&e.attachControl(r))},t.prototype.setActiveCameraByID=function(e){var t=this.getCameraByID(e);return t?(this.activeCamera=t,t):null},t.prototype.setActiveCameraByName=function(e){var t=this.getCameraByName(e);return t?(this.activeCamera=t,t):null},t.prototype.getAnimationGroupByName=function(e){for(var t=0;t<this.animationGroups.length;t++)if(this.animationGroups[t].name===e)return this.animationGroups[t];return null},t.prototype.getMaterialByID=function(e){for(var t=0;t<this.materials.length;t++)if(this.materials[t].id===e)return this.materials[t];return null},t.prototype.getMaterialByName=function(e){for(var t=0;t<this.materials.length;t++)if(this.materials[t].name===e)return this.materials[t];return null},t.prototype.getCameraByID=function(e){for(var t=0;t<this.cameras.length;t++)if(this.cameras[t].id===e)return this.cameras[t];return null},t.prototype.getCameraByUniqueID=function(e){for(var t=0;t<this.cameras.length;t++)if(this.cameras[t].uniqueId===e)return this.cameras[t];return null},t.prototype.getCameraByName=function(e){for(var t=0;t<this.cameras.length;t++)if(this.cameras[t].name===e)return this.cameras[t];return null},t.prototype.getBoneByID=function(e){for(var t=0;t<this.skeletons.length;t++)for(var r=this.skeletons[t],i=0;i<r.bones.length;i++)if(r.bones[i].id===e)return r.bones[i];return null},t.prototype.getBoneByName=function(e){for(var t=0;t<this.skeletons.length;t++)for(var r=this.skeletons[t],i=0;i<r.bones.length;i++)if(r.bones[i].name===e)return r.bones[i];return null},t.prototype.getLightByName=function(e){for(var t=0;t<this.lights.length;t++)if(this.lights[t].name===e)return this.lights[t];return null},t.prototype.getLightByID=function(e){for(var t=0;t<this.lights.length;t++)if(this.lights[t].id===e)return this.lights[t];return null},t.prototype.getLightByUniqueID=function(e){for(var t=0;t<this.lights.length;t++)if(this.lights[t].uniqueId===e)return this.lights[t];return null},t.prototype.getParticleSystemByID=function(e){for(var t=0;t<this.particleSystems.length;t++)if(this.particleSystems[t].id===e)return this.particleSystems[t];return null},t.prototype.getGeometryByID=function(e){for(var t=0;t<this.geometries.length;t++)if(this.geometries[t].id===e)return this.geometries[t];return null},t.prototype._getGeometryByUniqueID=function(e){if(this.geometriesByUniqueId){var t=this.geometriesByUniqueId[e];if(void 0!==t)return this.geometries[t]}else for(var r=0;r<this.geometries.length;r++)if(this.geometries[r].uniqueId===e)return this.geometries[r];return null},t.prototype.pushGeometry=function(e,t){return!(!t&&this._getGeometryByUniqueID(e.uniqueId))&&(this.addGeometry(e),this.collisionCoordinator&&this.collisionCoordinator.onGeometryAdded(e),this.onNewGeometryAddedObservable.notifyObservers(e),!0)},t.prototype.removeGeometry=function(e){var t;if(this.geometriesByUniqueId){if(void 0===(t=this.geometriesByUniqueId[e.uniqueId]))return!1}else if((t=this.geometries.indexOf(e))<0)return!1;if(t!==this.geometries.length-1){var r=this.geometries[this.geometries.length-1];this.geometries[t]=r,this.geometriesByUniqueId&&(this.geometriesByUniqueId[r.uniqueId]=t,this.geometriesByUniqueId[e.uniqueId]=void 0)}return this.geometries.pop(),this.collisionCoordinator&&this.collisionCoordinator.onGeometryDeleted(e),this.onGeometryRemovedObservable.notifyObservers(e),!0},t.prototype.getGeometries=function(){return this.geometries},t.prototype.getMeshByID=function(e){for(var t=0;t<this.meshes.length;t++)if(this.meshes[t].id===e)return this.meshes[t];return null},t.prototype.getMeshesByID=function(e){return this.meshes.filter(function(t){return t.id===e})},t.prototype.getTransformNodeByID=function(e){for(var t=0;t<this.transformNodes.length;t++)if(this.transformNodes[t].id===e)return this.transformNodes[t];return null},t.prototype.getTransformNodesByID=function(e){return this.transformNodes.filter(function(t){return t.id===e})},t.prototype.getMeshByUniqueID=function(e){for(var t=0;t<this.meshes.length;t++)if(this.meshes[t].uniqueId===e)return this.meshes[t];return null},t.prototype.getLastMeshByID=function(e){for(var t=this.meshes.length-1;t>=0;t--)if(this.meshes[t].id===e)return this.meshes[t];return null},t.prototype.getLastEntryByID=function(e){var t;for(t=this.meshes.length-1;t>=0;t--)if(this.meshes[t].id===e)return this.meshes[t];for(t=this.transformNodes.length-1;t>=0;t--)if(this.transformNodes[t].id===e)return this.transformNodes[t];for(t=this.cameras.length-1;t>=0;t--)if(this.cameras[t].id===e)return this.cameras[t];for(t=this.lights.length-1;t>=0;t--)if(this.lights[t].id===e)return this.lights[t];return null},t.prototype.getNodeByID=function(e){var t=this.getMeshByID(e);if(t)return t;var r=this.getTransformNodeByID(e);if(r)return r;var i=this.getLightByID(e);if(i)return i;var n=this.getCameraByID(e);if(n)return n;var a=this.getBoneByID(e);return a||null},t.prototype.getNodeByName=function(e){var t=this.getMeshByName(e);if(t)return t;var r=this.getTransformNodeByName(e);if(r)return r;var i=this.getLightByName(e);if(i)return i;var n=this.getCameraByName(e);if(n)return n;var a=this.getBoneByName(e);return a||null},t.prototype.getMeshByName=function(e){for(var t=0;t<this.meshes.length;t++)if(this.meshes[t].name===e)return this.meshes[t];return null},t.prototype.getTransformNodeByName=function(e){for(var t=0;t<this.transformNodes.length;t++)if(this.transformNodes[t].name===e)return this.transformNodes[t];return null},t.prototype.getLastSkeletonByID=function(e){for(var t=this.skeletons.length-1;t>=0;t--)if(this.skeletons[t].id===e)return this.skeletons[t];return null},t.prototype.getSkeletonById=function(e){for(var t=0;t<this.skeletons.length;t++)if(this.skeletons[t].id===e)return this.skeletons[t];return null},t.prototype.getSkeletonByName=function(e){for(var t=0;t<this.skeletons.length;t++)if(this.skeletons[t].name===e)return this.skeletons[t];return null},t.prototype.getMorphTargetManagerById=function(e){for(var t=0;t<this.morphTargetManagers.length;t++)if(this.morphTargetManagers[t].uniqueId===e)return this.morphTargetManagers[t];return null},t.prototype.getMorphTargetById=function(e){for(var t=0;t<this.morphTargetManagers.length;++t)for(var r=this.morphTargetManagers[t],i=0;i<r.numTargets;++i){var n=r.getTarget(i);if(n.id===e)return n}return null},t.prototype.isActiveMesh=function(e){return-1!==this._activeMeshes.indexOf(e)},Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid||(this._uid=n.c.RandomId()),this._uid},enumerable:!0,configurable:!0}),t.prototype.addExternalData=function(e,t){return this._externalData||(this._externalData=new h.a),this._externalData.add(e,t)},t.prototype.getExternalData=function(e){return this._externalData?this._externalData.get(e):null},t.prototype.getOrAddExternalDataWithFactory=function(e,t){return this._externalData||(this._externalData=new h.a),this._externalData.getOrAddWithFactory(e,t)},t.prototype.removeExternalData=function(e){return this._externalData.remove(e)},t.prototype._evaluateSubMesh=function(e,t){if(this.dispatchAllSubMeshesOfActiveMeshes||t.alwaysSelectAsActiveMesh||1===t.subMeshes.length||e.isInFrustum(this._frustumPlanes)){for(var r=0,i=this._evaluateSubMeshStage;r<i.length;r++){i[r].action(t,e)}var n=e.getMaterial();null!=n&&(n.hasRenderTargetTextures&&void 0!==n.getRenderTargetTextures&&-1===this._processedMaterials.indexOf(n)&&(this._processedMaterials.push(n),this._renderTargets.concatWithNoDuplicate(n.getRenderTargetTextures())),this._activeIndices.addCount(e.indexCount,!1),this._renderingManager.dispatch(e,t,n))}},t.prototype.freeProcessedMaterials=function(){this._processedMaterials.dispose()},Object.defineProperty(t.prototype,"blockfreeActiveMeshesAndRenderingGroups",{get:function(){return this._preventFreeActiveMeshesAndRenderingGroups},set:function(e){this._preventFreeActiveMeshesAndRenderingGroups!==e&&(e&&(this.freeActiveMeshes(),this.freeRenderingGroups()),this._preventFreeActiveMeshesAndRenderingGroups=e)},enumerable:!0,configurable:!0}),t.prototype.freeActiveMeshes=function(){if(!this.blockfreeActiveMeshesAndRenderingGroups&&(this._activeMeshes.dispose(),this.activeCamera&&this.activeCamera._activeMeshes&&this.activeCamera._activeMeshes.dispose(),this.activeCameras))for(var e=0;e<this.activeCameras.length;e++){var t=this.activeCameras[e];t&&t._activeMeshes&&t._activeMeshes.dispose()}},t.prototype.freeRenderingGroups=function(){if(!this.blockfreeActiveMeshesAndRenderingGroups&&(this._renderingManager&&this._renderingManager.freeRenderingGroups(),this.textures))for(var e=0;e<this.textures.length;e++){var t=this.textures[e];t&&t.renderList&&t.freeRenderingGroups()}},t.prototype._isInIntermediateRendering=function(){return this._intermediateRendering},t.prototype.freezeActiveMeshes=function(){return this.activeCamera?(this._frustumPlanes||this.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix()),this._evaluateActiveMeshes(),this._activeMeshesFrozen=!0,this):this},t.prototype.unfreezeActiveMeshes=function(){return this._activeMeshesFrozen=!1,this},t.prototype._evaluateActiveMeshes=function(){if((!this._activeMeshesFrozen||!this._activeMeshes.length)&&this.activeCamera){this.onBeforeActiveMeshesEvaluationObservable.notifyObservers(this),this.activeCamera._activeMeshes.reset(),this._activeMeshes.reset(),this._renderingManager.reset(),this._processedMaterials.reset(),this._activeParticleSystems.reset(),this._activeSkeletons.reset(),this._softwareSkinnedMeshes.reset();for(var e=0,t=this._beforeEvaluateActiveMeshStage;e<t.length;e++){t[e].action()}for(var r=this.getActiveMeshCandidates(),i=r.length,n=0;n<i;n++){var a=r.data[n];if(!a.isBlocked&&(this._totalVertices.addCount(a.getTotalVertices(),!1),a.isReady()&&a.isEnabled())){a.computeWorldMatrix(),a.actionManager&&a.actionManager.hasSpecificTriggers2(D.a.ACTION_OnIntersectionEnterTrigger,D.a.ACTION_OnIntersectionExitTrigger)&&this._meshesForIntersections.pushNoDuplicate(a);var s=a.getLOD(this.activeCamera);null!=s&&(a._preActivate(),a.isVisible&&a.visibility>0&&0!=(a.layerMask&this.activeCamera.layerMask)&&(a.alwaysSelectAsActiveMesh||a.isInFrustum(this._frustumPlanes))&&(this._activeMeshes.push(a),this.activeCamera._activeMeshes.push(a),a._activate(this._renderId),s!==a&&s._activate(this._renderId),this._activeMesh(a,s)))}}if(this.onAfterActiveMeshesEvaluationObservable.notifyObservers(this),this.particlesEnabled){this.onBeforeParticlesRenderingObservable.notifyObservers(this);for(var o=0;o<this.particleSystems.length;o++){var h=this.particleSystems[o];if(h.isStarted()&&h.emitter){var c=h.emitter;c.position&&!c.isEnabled()||(this._activeParticleSystems.push(h),h.animate(),this._renderingManager.dispatchParticles(h))}}this.onAfterParticlesRenderingObservable.notifyObservers(this)}}},t.prototype._activeMesh=function(e,t){this._skeletonsEnabled&&null!==t.skeleton&&void 0!==t.skeleton&&(this._activeSkeletons.pushNoDuplicate(t.skeleton)&&t.skeleton.prepare(),t.computeBonesUsingShaders||this._softwareSkinnedMeshes.pushNoDuplicate(t));for(var r=0,i=this._activeMeshStage;r<i.length;r++){i[r].action(e,t)}if(null!=t&&void 0!==t.subMeshes&&null!==t.subMeshes&&t.subMeshes.length>0)for(var n=this.getActiveSubMeshCandidates(t),a=n.length,s=0;s<a;s++){var o=n.data[s];this._evaluateSubMesh(o,t)}},t.prototype.updateTransformMatrix=function(e){this.activeCamera&&this.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix(e))},t.prototype.updateAlternateTransformMatrix=function(e){this._setAlternateTransformMatrix(e.getViewMatrix(),e.getProjectionMatrix())},t.prototype._renderForCamera=function(e,t){if(!e||!e._skipRendering){var r=this._engine;if(this.activeCamera=e,!this.activeCamera)throw new Error("Active camera not set");r.setViewport(this.activeCamera.viewport),this.resetCachedMaterial(),this._renderId++,this.updateTransformMatrix(),e._alternateCamera&&(this.updateAlternateTransformMatrix(e._alternateCamera),this._alternateRendering=!0),this.onBeforeCameraRenderObservable.notifyObservers(this.activeCamera),this._evaluateActiveMeshes();for(var i=0;i<this._softwareSkinnedMeshes.length;i++){var a=this._softwareSkinnedMeshes.data[i];a.applySkeleton(a.skeleton)}this.onBeforeRenderTargetsRenderObservable.notifyObservers(this),e.customRenderTargets&&e.customRenderTargets.length>0&&this._renderTargets.concatWithNoDuplicate(e.customRenderTargets),t&&t.customRenderTargets&&t.customRenderTargets.length>0&&this._renderTargets.concatWithNoDuplicate(t.customRenderTargets);for(var s=0,o=this._gatherActiveCameraRenderTargetsStage;s<o.length;s++){o[s].action(this._renderTargets)}if(this.renderTargetsEnabled){if(this._intermediateRendering=!0,this._renderTargets.length>0){n.c.StartPerformanceCounter("Render targets",this._renderTargets.length>0);for(var h=0;h<this._renderTargets.length;h++){var c=this._renderTargets.data[h];if(c._shouldRender()){this._renderId++;var l=c.activeCamera&&c.activeCamera!==this.activeCamera;c.render(l,this.dumpNextRenderTargets)}}n.c.EndPerformanceCounter("Render targets",this._renderTargets.length>0),this._renderId++}for(var u=0,d=this._cameraDrawRenderTargetStage;u<d.length;u++){d[u].action(this.activeCamera)}if(this._intermediateRendering=!1,this.activeCamera.outputRenderTarget){var p=this.activeCamera.outputRenderTarget.getInternalTexture();p?r.bindFramebuffer(p):S.a.Error("Camera contains invalid customDefaultRenderTarget")}else r.restoreDefaultFramebuffer()}this.onAfterRenderTargetsRenderObservable.notifyObservers(this),this.postProcessManager&&this.postProcessManager._prepareFrame();for(var f=0,g=this._beforeCameraDrawStage;f<g.length;f++){g[f].action(this.activeCamera)}this.onBeforeDrawPhaseObservable.notifyObservers(this),this._renderingManager.render(null,null,!0,!0),this.onAfterDrawPhaseObservable.notifyObservers(this);for(var _=0,v=this._afterCameraDrawStage;_<v.length;_++){v[_].action(this.activeCamera)}this.postProcessManager&&this.postProcessManager._finalizeFrame(e.isIntermediate),this._renderTargets.reset(),this._alternateRendering=!1,this.onAfterCameraRenderObservable.notifyObservers(this.activeCamera)}},t.prototype._processSubCameras=function(e){if(e.cameraRigMode!==d.a.RIG_MODE_NONE){for(var t=0;t<e._rigCameras.length;t++)this._renderForCamera(e._rigCameras[t],e);this.activeCamera=e,this.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix())}else this._renderForCamera(e)},t.prototype._checkIntersections=function(){for(var e=0;e<this._meshesForIntersections.length;e++){var t=this._meshesForIntersections.data[e];if(t.actionManager)for(var r=0;r<t.actionManager.actions.length;r++){var i=t.actionManager.actions[r];if(i.trigger===D.a.ACTION_OnIntersectionEnterTrigger||i.trigger===D.a.ACTION_OnIntersectionExitTrigger){var n=i.getTriggerParameter(),a=n instanceof u.a?n:n.mesh,s=a.intersectsMesh(t,n.usePreciseIntersection),o=t._intersectionsInProgress.indexOf(a);s&&-1===o?i.trigger===D.a.ACTION_OnIntersectionEnterTrigger?(i._executeCurrent(O.a.CreateNew(t,void 0,a)),t._intersectionsInProgress.push(a)):i.trigger===D.a.ACTION_OnIntersectionExitTrigger&&t._intersectionsInProgress.push(a):!s&&o>-1&&(i.trigger===D.a.ACTION_OnIntersectionExitTrigger&&i._executeCurrent(O.a.CreateNew(t,void 0,a)),t.actionManager.hasSpecificTrigger(D.a.ACTION_OnIntersectionExitTrigger,function(e){var t=e instanceof u.a?e:e.mesh;return a===t})&&i.trigger!==D.a.ACTION_OnIntersectionExitTrigger||t._intersectionsInProgress.splice(o,1))}}}},t.prototype._advancePhysicsEngineStep=function(e){},t.prototype.render=function(e){if(void 0===e&&(e=!0),!this.isDisposed){if(this._frameId++,this._registerTransientComponents(),this._activeParticles.fetchNewFrame(),this._totalVertices.fetchNewFrame(),this._activeIndices.fetchNewFrame(),this._activeBones.fetchNewFrame(),this._meshesForIntersections.reset(),this.resetCachedMaterial(),this.onBeforeAnimationsObservable.notifyObservers(this),this.actionManager&&this.actionManager.processTrigger(D.a.ACTION_OnEveryFrameTrigger),this._engine.isDeterministicLockStep()){var r=Math.max(t.MinDeltaTime,Math.min(this._engine.getDeltaTime(),t.MaxDeltaTime))+this._timeAccumulator,i=this.getDeterministicFrameTime(),a=0,s=this._engine.getLockstepMaxSteps(),o=Math.floor(r/60);o=Math.min(o,s);do{this.onBeforeStepObservable.notifyObservers(this),this._animationRatio=.06*i,this._animate(),this.onAfterAnimationsObservable.notifyObservers(this),this._advancePhysicsEngineStep(i),this.onAfterStepObservable.notifyObservers(this),this._currentStepId++,a++,r-=i}while(r>0&&a<o);this._timeAccumulator=r<0?0:r}else{r=this.useConstantAnimationDeltaTime?16:Math.max(t.MinDeltaTime,Math.min(this._engine.getDeltaTime(),t.MaxDeltaTime));this._animationRatio=.06*r,this._animate(),this.onAfterAnimationsObservable.notifyObservers(this),this._advancePhysicsEngineStep(r)}for(var h=0,c=this._beforeCameraUpdateStage;h<c.length;h++){c[h].action()}if(e)if(this.activeCameras.length>0)for(var l=0;l<this.activeCameras.length;l++){var u=this.activeCameras[l];if(u.update(),u.cameraRigMode!==d.a.RIG_MODE_NONE)for(var p=0;p<u._rigCameras.length;p++)u._rigCameras[p].update()}else if(this.activeCamera&&(this.activeCamera.update(),this.activeCamera.cameraRigMode!==d.a.RIG_MODE_NONE))for(p=0;p<this.activeCamera._rigCameras.length;p++)this.activeCamera._rigCameras[p].update();this.onBeforeRenderObservable.notifyObservers(this),this.onBeforeRenderTargetsRenderObservable.notifyObservers(this);var f=this.getEngine(),g=this.activeCamera;if(this.renderTargetsEnabled){n.c.StartPerformanceCounter("Custom render targets",this.customRenderTargets.length>0),this._intermediateRendering=!0;for(var _=0;_<this.customRenderTargets.length;_++){var v=this.customRenderTargets[_];if(v._shouldRender()){if(this._renderId++,this.activeCamera=v.activeCamera||this.activeCamera,!this.activeCamera)throw new Error("Active camera not set");f.setViewport(this.activeCamera.viewport),this.updateTransformMatrix(),v.render(g!==this.activeCamera,this.dumpNextRenderTargets)}}n.c.EndPerformanceCounter("Custom render targets",this.customRenderTargets.length>0),this._intermediateRendering=!1,this._renderId++}this.customRenderTargets.length>0&&f.restoreDefaultFramebuffer(),this.onAfterRenderTargetsRenderObservable.notifyObservers(this),this.activeCamera=g;for(var m=0,b=this._beforeClearStage;m<b.length;m++){b[m].action()}(this.autoClearDepthAndStencil||this.autoClear)&&this._engine.clear(this.clearColor,this.autoClear||this.forceWireframe||this.forcePointsCloud,this.autoClearDepthAndStencil,this.autoClearDepthAndStencil);for(var y=0,M=this._gatherRenderTargetsStage;y<M.length;y++){M[y].action(this._renderTargets)}if(this.activeCameras.length>0)for(l=0;l<this.activeCameras.length;l++)l>0&&this._engine.clear(null,!1,!0,!0),this._processSubCameras(this.activeCameras[l]);else{if(!this.activeCamera)throw new Error("No camera defined");this._processSubCameras(this.activeCamera)}this._checkIntersections();for(var P=0,O=this._afterRenderStage;P<O.length;P++){O[P].action()}if(this.afterRender&&this.afterRender(),this.onAfterRenderObservable.notifyObservers(this),this._toBeDisposed.length){for(p=0;p<this._toBeDisposed.length;p++){var R=this._toBeDisposed[p];R&&R.dispose()}this._toBeDisposed=[]}this.dumpNextRenderTargets&&(this.dumpNextRenderTargets=!1),this._activeBones.addCount(0,!0),this._activeIndices.addCount(0,!0),this._activeParticles.addCount(0,!0)}},t.prototype.freezeMaterials=function(){for(var e=0;e<this.materials.length;e++)this.materials[e].freeze()},t.prototype.unfreezeMaterials=function(){for(var e=0;e<this.materials.length;e++)this.materials[e].unfreeze()},t.prototype.dispose=function(){this.beforeRender=null,this.afterRender=null,this.skeletons=[],this.morphTargetManagers=[],this._transientComponents=[],this._isReadyForMeshStage.clear(),this._beforeEvaluateActiveMeshStage.clear(),this._evaluateSubMeshStage.clear(),this._activeMeshStage.clear(),this._cameraDrawRenderTargetStage.clear(),this._beforeCameraDrawStage.clear(),this._beforeRenderTargetDrawStage.clear(),this._beforeRenderingGroupDrawStage.clear(),this._beforeRenderingMeshStage.clear(),this._afterRenderingMeshStage.clear(),this._afterRenderingGroupDrawStage.clear(),this._afterCameraDrawStage.clear(),this._afterRenderTargetDrawStage.clear(),this._afterRenderStage.clear(),this._beforeCameraUpdateStage.clear(),this._beforeClearStage.clear(),this._gatherRenderTargetsStage.clear(),this._gatherActiveCameraRenderTargetsStage.clear(),this._pointerMoveStage.clear(),this._pointerDownStage.clear(),this._pointerUpStage.clear();for(var e=0,t=this._components;e<t.length;e++){t[e].dispose()}this.importedMeshesFiles=new Array,this.stopAllAnimations(),this.resetCachedMaterial(),this.activeCamera&&(this.activeCamera._activeMeshes.dispose(),this.activeCamera=null),this._activeMeshes.dispose(),this._renderingManager.dispose(),this._processedMaterials.dispose(),this._activeParticleSystems.dispose(),this._activeSkeletons.dispose(),this._softwareSkinnedMeshes.dispose(),this._renderTargets.dispose(),this._registeredForLateAnimationBindings.dispose(),this._meshesForIntersections.dispose(),this._toBeDisposed=[];for(var r=0,i=this._activeRequests;r<i.length;r++){i[r].abort()}this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onBeforeRenderObservable.clear(),this.onAfterRenderObservable.clear(),this.onBeforeRenderTargetsRenderObservable.clear(),this.onAfterRenderTargetsRenderObservable.clear(),this.onAfterStepObservable.clear(),this.onBeforeStepObservable.clear(),this.onBeforeActiveMeshesEvaluationObservable.clear(),this.onAfterActiveMeshesEvaluationObservable.clear(),this.onBeforeParticlesRenderingObservable.clear(),this.onAfterParticlesRenderingObservable.clear(),this.onBeforeDrawPhaseObservable.clear(),this.onAfterDrawPhaseObservable.clear(),this.onBeforeAnimationsObservable.clear(),this.onAfterAnimationsObservable.clear(),this.onDataLoadedObservable.clear(),this.onBeforeRenderingGroupObservable.clear(),this.onAfterRenderingGroupObservable.clear(),this.onMeshImportedObservable.clear(),this.onBeforeCameraRenderObservable.clear(),this.onAfterCameraRenderObservable.clear(),this.onReadyObservable.clear(),this.onNewCameraAddedObservable.clear(),this.onCameraRemovedObservable.clear(),this.onNewLightAddedObservable.clear(),this.onLightRemovedObservable.clear(),this.onNewGeometryAddedObservable.clear(),this.onGeometryRemovedObservable.clear(),this.onNewTransformNodeAddedObservable.clear(),this.onTransformNodeRemovedObservable.clear(),this.onNewMeshAddedObservable.clear(),this.onMeshRemovedObservable.clear(),this.onNewMaterialAddedObservable.clear(),this.onMaterialRemovedObservable.clear(),this.onNewTextureAddedObservable.clear(),this.onTextureRemovedObservable.clear(),this.onPrePointerObservable.clear(),this.onPointerObservable.clear(),this.onPreKeyboardObservable.clear(),this.onKeyboardObservable.clear(),this.onActiveCameraChanged.clear(),this.detachControl();var n,a=this._engine.getRenderingCanvas();if(a)for(n=0;n<this.cameras.length;n++)this.cameras[n].detachControl(a);for(;this.animationGroups.length;)this.animationGroups[0].dispose();for(;this.lights.length;)this.lights[0].dispose();for(;this.meshes.length;)this.meshes[0].dispose(!0);for(;this.transformNodes.length;)this.removeTransformNode(this.transformNodes[0]);for(;this.cameras.length;)this.cameras[0].dispose();for(this.defaultMaterial&&this.defaultMaterial.dispose();this.multiMaterials.length;)this.multiMaterials[0].dispose();for(;this.materials.length;)this.materials[0].dispose();for(;this.particleSystems.length;)this.particleSystems[0].dispose();for(;this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.textures.length;)this.textures[0].dispose();this._sceneUbo.dispose(),this._alternateSceneUbo&&this._alternateSceneUbo.dispose(),this.postProcessManager.dispose(),(n=this._engine.scenes.indexOf(this))>-1&&this._engine.scenes.splice(n,1),this._engine.wipeCaches(!0),this._isDisposed=!0},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),t.prototype.clearCachedVertexData=function(){for(var e=0;e<this.meshes.length;e++){var t=this.meshes[e].geometry;if(t)for(var r in t._indices=[],t._vertexBuffers)t._vertexBuffers.hasOwnProperty(r)&&(t._vertexBuffers[r]._buffer._data=null)}},t.prototype.cleanCachedTextureBuffer=function(){for(var e=0,t=this.textures;e<t.length;e++){var r=t[e];r._buffer&&(r._buffer=null)}},t.prototype.getWorldExtends=function(e){var t=new l.Vector3(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),r=new l.Vector3(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);return e=e||function(){return!0},this.meshes.filter(e).forEach(function(e){if(e.computeWorldMatrix(!0),e.subMeshes&&0!==e.subMeshes.length&&!e.infiniteDistance){var i=e.getBoundingInfo(),a=i.boundingBox.minimumWorld,s=i.boundingBox.maximumWorld;n.c.CheckExtends(a,t,r),n.c.CheckExtends(s,t,r)}}),{min:t,max:r}},t.prototype.createPickingRay=function(e,t,r,i,n){void 0===n&&(n=!1);var a=E.a.Zero();return this.createPickingRayToRef(e,t,r,a,i,n),a},t.prototype.createPickingRayToRef=function(e,t,r,i,n,a){void 0===a&&(a=!1);var s=this._engine;if(!n){if(!this.activeCamera)throw new Error("Active camera not set");n=this.activeCamera}var o=n.viewport.toGlobal(s.getRenderWidth(),s.getRenderHeight());return e=e/this._engine.getHardwareScalingLevel()-o.x,t=t/this._engine.getHardwareScalingLevel()-(this._engine.getRenderHeight()-o.y-o.height),i.update(e,t,o.width,o.height,r||l.Matrix.IdentityReadOnly,a?l.Matrix.IdentityReadOnly:n.getViewMatrix(),n.getProjectionMatrix()),this},t.prototype.createPickingRayInCameraSpace=function(e,t,r){var i=E.a.Zero();return this.createPickingRayInCameraSpaceToRef(e,t,i,r),i},t.prototype.createPickingRayInCameraSpaceToRef=function(e,t,r,i){if(!b.a)return this;var n=this._engine;if(!i){if(!this.activeCamera)throw new Error("Active camera not set");i=this.activeCamera}var a=i.viewport.toGlobal(n.getRenderWidth(),n.getRenderHeight()),s=l.Matrix.Identity();return e=e/this._engine.getHardwareScalingLevel()-a.x,t=t/this._engine.getHardwareScalingLevel()-(this._engine.getRenderHeight()-a.y-a.height),r.update(e,t,a.width,a.height,s,s,i.getProjectionMatrix()),this},t.prototype._internalPick=function(e,t,r){if(!b.a)return null;for(var i=null,n=0;n<this.meshes.length;n++){var a=this.meshes[n];if(t){if(!t(a))continue}else if(!a.isEnabled()||!a.isVisible||!a.isPickable)continue;var s=e(a.getWorldMatrix()),o=a.intersects(s,r);if(o&&o.hit&&((r||null==i||!(o.distance>=i.distance))&&(i=o,r)))break}return i||new b.a},t.prototype._internalMultiPick=function(e,t){if(!b.a)return null;for(var r=new Array,i=0;i<this.meshes.length;i++){var n=this.meshes[i];if(t){if(!t(n))continue}else if(!n.isEnabled()||!n.isVisible||!n.isPickable)continue;var a=e(n.getWorldMatrix()),s=n.intersects(a,!1);s&&s.hit&&r.push(s)}return r},t.prototype.pick=function(e,t,r,i,n){var a=this;if(!b.a)return null;var s=this._internalPick(function(r){return a.createPickingRayToRef(e,t,r,a._tempPickingRay,n||null),a._tempPickingRay},r,i);return s&&(s.ray=this.createPickingRay(e,t,l.Matrix.Identity(),n||null)),s},t.prototype.pickWithRay=function(e,t,r){var i=this,n=this._internalPick(function(t){return i._pickWithRayInverseMatrix||(i._pickWithRayInverseMatrix=l.Matrix.Identity()),t.invertToRef(i._pickWithRayInverseMatrix),i._cachedRayForTransform||(i._cachedRayForTransform=E.a.Zero()),E.a.TransformToRef(e,i._pickWithRayInverseMatrix,i._cachedRayForTransform),i._cachedRayForTransform},t,r);return n&&(n.ray=e),n},t.prototype.multiPick=function(e,t,r,i){var n=this;return this._internalMultiPick(function(r){return n.createPickingRay(e,t,r,i||null)},r)},t.prototype.multiPickWithRay=function(e,t){var r=this;return this._internalMultiPick(function(t){return r._pickWithRayInverseMatrix||(r._pickWithRayInverseMatrix=l.Matrix.Identity()),t.invertToRef(r._pickWithRayInverseMatrix),r._cachedRayForTransform||(r._cachedRayForTransform=E.a.Zero()),E.a.TransformToRef(e,r._pickWithRayInverseMatrix,r._cachedRayForTransform),r._cachedRayForTransform},t)},t.prototype.setPointerOverMesh=function(e){this._pointerOverMesh!==e&&(this._pointerOverMesh&&this._pointerOverMesh.actionManager&&this._pointerOverMesh.actionManager.processTrigger(D.a.ACTION_OnPointerOutTrigger,O.a.CreateNew(this._pointerOverMesh)),this._pointerOverMesh=e,this._pointerOverMesh&&this._pointerOverMesh.actionManager&&this._pointerOverMesh.actionManager.processTrigger(D.a.ACTION_OnPointerOverTrigger,O.a.CreateNew(this._pointerOverMesh)))},t.prototype.getPointerOverMesh=function(){return this._pointerOverMesh},t.prototype._rebuildGeometries=function(){for(var e=0,t=this.geometries;e<t.length;e++){t[e]._rebuild()}for(var r=0,i=this.meshes;r<i.length;r++){i[r]._rebuild()}this.postProcessManager&&this.postProcessManager._rebuild();for(var n=0,a=this._components;n<a.length;n++){a[n].rebuild()}for(var s=0,o=this.particleSystems;s<o.length;s++){o[s].rebuild()}},t.prototype._rebuildTextures=function(){for(var e=0,t=this.textures;e<t.length;e++){t[e]._rebuild()}this.markAllMaterialsAsDirty(D.a.MATERIAL_TextureDirtyFlag)},t.prototype._getByTags=function(e,t,r){if(void 0===t)return e;var i=[];for(var n in r=r||function(e){},e){var a=e[n];c.a&&c.a.MatchesQuery(a,t)&&(i.push(a),r(a))}return i},t.prototype.getMeshesByTags=function(e,t){return this._getByTags(this.meshes,e,t)},t.prototype.getCamerasByTags=function(e,t){return this._getByTags(this.cameras,e,t)},t.prototype.getLightsByTags=function(e,t){return this._getByTags(this.lights,e,t)},t.prototype.getMaterialByTags=function(e,t){return this._getByTags(this.materials,e,t).concat(this._getByTags(this.multiMaterials,e,t))},t.prototype.setRenderingOrder=function(e,t,r,i){void 0===t&&(t=null),void 0===r&&(r=null),void 0===i&&(i=null),this._renderingManager.setRenderingOrder(e,t,r,i)},t.prototype.setRenderingAutoClearDepthStencil=function(e,t,r,i){void 0===r&&(r=!0),void 0===i&&(i=!0),this._renderingManager.setRenderingAutoClearDepthStencil(e,t,r,i)},t.prototype.getAutoClearDepthStencilSetup=function(e){return this._renderingManager.getAutoClearDepthStencilSetup(e)},Object.defineProperty(t.prototype,"blockMaterialDirtyMechanism",{get:function(){return this._blockMaterialDirtyMechanism},set:function(e){this._blockMaterialDirtyMechanism!==e&&(this._blockMaterialDirtyMechanism=e,e||this.markAllMaterialsAsDirty(D.a.MATERIAL_AllDirtyFlag))},enumerable:!0,configurable:!0}),t.prototype.markAllMaterialsAsDirty=function(e,t){if(!this._blockMaterialDirtyMechanism)for(var r=0,i=this.materials;r<i.length;r++){var n=i[r];t&&!t(n)||n.markAsDirty(e)}},t.prototype._loadFile=function(e,t,r,i,a,s){var o=this,h=n.c.LoadFile(e,t,r,i?this.offlineProvider:void 0,a,s);return this._activeRequests.push(h),h.onCompleteObservable.add(function(e){o._activeRequests.splice(o._activeRequests.indexOf(e),1)}),h},t.prototype._loadFileAsync=function(e,t,r){var i=this;return new Promise(function(n,a){i._loadFile(e,function(e){n(e)},void 0,t,r,function(e,t){a(t)})})},t._uniqueIdCounter=0,t.FOGMODE_NONE=0,t.FOGMODE_EXP=1,t.FOGMODE_EXP2=2,t.FOGMODE_LINEAR=3,t.MinDeltaTime=1,t.MaxDeltaTime=1e3,t.DragMovementThreshold=10,t.LongPressDelay=500,t.DoubleClickDelay=300,t.ExclusiveDoubleClickMode=!1,t}(p.a)},85:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(23),n=r(34),a=r(0),s=r(77),o=r(82),h=r(83),c=r(84);var l=document.createElement("canvas");l.id="renderCanvas",l.width=1280,l.height=720,l.style.position="absolute",l.style.border="1px solid",document.getElementsByTagName("body")[0].appendChild(l);var u=new i.Engine(l,!0);l.style.width="100vw",l.style.height="56.25vw";var d=function(){var e=new n.Scene(u);return new o.ArcRotateCamera("Camera",Math.PI/2,Math.PI/2,2,a.Vector3.Zero(),e).attachControl(l,!0),new s.HemisphericLight("light1",new a.Vector3(1,1,0),e),h.MeshBuilder.CreateSphere("sphere",{diameter:1},e).material=new c.StandardMaterial("mat",e),e}();u.runRenderLoop(()=>{d.render()})}}]);